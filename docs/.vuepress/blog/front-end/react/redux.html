<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/code.png"><title>Redux | 牧童的博客</title><meta name="description" content="Vuepress,JavaScript,Node.js,React.js,Vue.js,Mongodb,Nest,Koa,Express前端开发">
    <link rel="preload" href="/assets/style-52806621.css" as="style"><link rel="stylesheet" href="/assets/style-52806621.css">
    <link rel="modulepreload" href="/assets/app-ec006255.js"><link rel="modulepreload" href="/assets/framework-c27b6911.js"><link rel="modulepreload" href="/assets/redux.html-198fe6c0.js"><link rel="modulepreload" href="/assets/redux.html-1ebe26ac.js"><link rel="prefetch" href="/assets/index.html-42ee55f0.js" as="script"><link rel="prefetch" href="/assets/array-arrangement.html-0c477f04.js" as="script"><link rel="prefetch" href="/assets/combine-ascending-list.html-c8ce9dc7.js" as="script"><link rel="prefetch" href="/assets/create-brackets.html-0564cad5.js" as="script"><link rel="prefetch" href="/assets/devide-two-number.html-59022f76.js" as="script"><link rel="prefetch" href="/assets/first-match-string-index.html-a5e8944a.js" as="script"><link rel="prefetch" href="/assets/implement-strStr.html-b6fefe9c.js" as="script"><link rel="prefetch" href="/assets/int-reverse.html-998bbe67.js" as="script"><link rel="prefetch" href="/assets/intersection-of-two-array.html-d575c791.js" as="script"><link rel="prefetch" href="/assets/longest-reverse-substring.html-e703825a.js" as="script"><link rel="prefetch" href="/assets/longest-substring-without-repeat.html-319aad77.js" as="script"><link rel="prefetch" href="/assets/longest-valid-brackets.html-3af263f2.js" as="script"><link rel="prefetch" href="/assets/matrix-rotate.html-ef9d72be.js" as="script"><link rel="prefetch" href="/assets/max-consecutive-ones.html-0a39b5c7.js" as="script"><link rel="prefetch" href="/assets/min-sub-array-length.html-74af82e5.js" as="script"><link rel="prefetch" href="/assets/number-to-roman.html-530850f5.js" as="script"><link rel="prefetch" href="/assets/palindrome-number.html-af9148bd.js" as="script"><link rel="prefetch" href="/assets/phone-number-combine.html-4d0587ec.js" as="script"><link rel="prefetch" href="/assets/remove-nth-node-from-list.html-fa8e47f0.js" as="script"><link rel="prefetch" href="/assets/resolve_sudoko.html-9c488eab.js" as="script"><link rel="prefetch" href="/assets/reverse-letter-of-word-in-string.html-663a08aa.js" as="script"><link rel="prefetch" href="/assets/reverse-string-word.html-15792f65.js" as="script"><link rel="prefetch" href="/assets/roman-to-number.html-6b74070b.js" as="script"><link rel="prefetch" href="/assets/search-rotate-array-item.html-2238e581.js" as="script"><link rel="prefetch" href="/assets/string-to-number.html-8322a72d.js" as="script"><link rel="prefetch" href="/assets/substrings-with-concat.html-d5caecd4.js" as="script"><link rel="prefetch" href="/assets/zero-matrix.html-55347dd2.js" as="script"><link rel="prefetch" href="/assets/express.html-bd27dcb8.js" as="script"><link rel="prefetch" href="/assets/koa.html-86126d2f.js" as="script"><link rel="prefetch" href="/assets/nest.html-3743d572.js" as="script"><link rel="prefetch" href="/assets/node.html-b4f98561.js" as="script"><link rel="prefetch" href="/assets/add-two-number.html-1d4b2372.js" as="script"><link rel="prefetch" href="/assets/array-middle-index.html-955b3f74.js" as="script"><link rel="prefetch" href="/assets/array-split.html-22a21a22.js" as="script"><link rel="prefetch" href="/assets/closest-three-number-sum.html-22632630.js" as="script"><link rel="prefetch" href="/assets/combine-array-range.html-e05a6856.js" as="script"><link rel="prefetch" href="/assets/four-number-sum.html-67076d3d.js" as="script"><link rel="prefetch" href="/assets/longest-string-prefix.html-193660f1.js" as="script"><link rel="prefetch" href="/assets/middle-number-of-two-array.html-1b1fad7d.js" as="script"><link rel="prefetch" href="/assets/remove-array-zero-item.html-fec06c75.js" as="script"><link rel="prefetch" href="/assets/remove-repeat-item.html-6d06f3a9.js" as="script"><link rel="prefetch" href="/assets/remove-specified-element.html-24858cff.js" as="script"><link rel="prefetch" href="/assets/search-insert-index.html-69b960b0.js" as="script"><link rel="prefetch" href="/assets/three-number-sum.html-93436349.js" as="script"><link rel="prefetch" href="/assets/two-number-sum.html-394f7963.js" as="script"><link rel="prefetch" href="/assets/valid-sudoku.html-4b731a48.js" as="script"><link rel="prefetch" href="/assets/water-container.html-d370652f.js" as="script"><link rel="prefetch" href="/assets/yang-hui-triangle.html-0acbc5eb.js" as="script"><link rel="prefetch" href="/assets/closest-the-number-of-array.html-4bf454e1.js" as="script"><link rel="prefetch" href="/assets/concept.html-b987ccc6.js" as="script"><link rel="prefetch" href="/assets/find-first-last-index.html-6fad519c.js" as="script"><link rel="prefetch" href="/assets/find-max-value.html-739a9a53.js" as="script"><link rel="prefetch" href="/assets/find-smallest-letter-bigger-than-target.html-2a5a50e0.js" as="script"><link rel="prefetch" href="/assets/find-target-index.html-c63f3f4f.js" as="script"><link rel="prefetch" href="/assets/first-bad-version.html-ead6f092.js" as="script"><link rel="prefetch" href="/assets/guess-number.html-78b00179.js" as="script"><link rel="prefetch" href="/assets/implement-pow.html-f6597599.js" as="script"><link rel="prefetch" href="/assets/negative-number-count-in-grid.html-c00c9808.js" as="script"><link rel="prefetch" href="/assets/rotate-array.html-fab50fe4.js" as="script"><link rel="prefetch" href="/assets/square-root-of-number.html-7f01fb2f.js" as="script"><link rel="prefetch" href="/assets/valid-sqrt-number.html-6caecc1f.js" as="script"><link rel="prefetch" href="/assets/appear-once-in-array.html-4e9111ab.js" as="script"><link rel="prefetch" href="/assets/first-unique-character-in-string.html-553b8b3d.js" as="script"><link rel="prefetch" href="/assets/group-anagram.html-4d297c6c.js" as="script"><link rel="prefetch" href="/assets/happy-number.html-348f1261.js" as="script"><link rel="prefetch" href="/assets/has-repeat-item.html-d3d602d0.js" as="script"><link rel="prefetch" href="/assets/intersection-of-two-array.html-b7dc5a99.js" as="script"><link rel="prefetch" href="/assets/is-isomorphism-string.html-4579347e.js" as="script"><link rel="prefetch" href="/assets/min-index-sum-of-two-array.html-9703e84a.js" as="script"><link rel="prefetch" href="/assets/top-k-frequent-number.html-1812febf.js" as="script"><link rel="prefetch" href="/assets/circle-queue.html-235c8d03.js" as="script"><link rel="prefetch" href="/assets/decode-string.html-0fa8ccb5.js" as="script"><link rel="prefetch" href="/assets/evaluate-reverse-polish-expression.html-d89354ef.js" as="script"><link rel="prefetch" href="/assets/min-stack.html-b6ed361b.js" as="script"><link rel="prefetch" href="/assets/square-number.html-2e2369a2.js" as="script"><link rel="prefetch" href="/assets/temperature-every-day.html-da9389f4.js" as="script"><link rel="prefetch" href="/assets/valid-brackets.html-dd340568.js" as="script"><link rel="prefetch" href="/assets/concept.html-a29e84a4.js" as="script"><link rel="prefetch" href="/assets/mongodb.html-eaf3206f.js" as="script"><link rel="prefetch" href="/assets/mongoose.html-b1340e82.js" as="script"><link rel="prefetch" href="/assets/mongosh.html-34a9d3f4.js" as="script"><link rel="prefetch" href="/assets/commander.html-c63a0672.js" as="script"><link rel="prefetch" href="/assets/formidable.html-dcd7a124.js" as="script"><link rel="prefetch" href="/assets/inquirer.html-4ee207a1.js" as="script"><link rel="prefetch" href="/assets/joi.html-318d8bd7.js" as="script"><link rel="prefetch" href="/assets/nodemon.html-bb93ae54.js" as="script"><link rel="prefetch" href="/assets/tapable.html-3ca73848.js" as="script"><link rel="prefetch" href="/assets/animation.html-661263d1.js" as="script"><link rel="prefetch" href="/assets/bfc.html-516b3c7b.js" as="script"><link rel="prefetch" href="/assets/box.html-cc281ff4.js" as="script"><link rel="prefetch" href="/assets/center.html-d5b9dcc4.js" as="script"><link rel="prefetch" href="/assets/flex.html-3635e5e0.js" as="script"><link rel="prefetch" href="/assets/float.html-e4466700.js" as="script"><link rel="prefetch" href="/assets/grid.html-53193071.js" as="script"><link rel="prefetch" href="/assets/mobile.html-787719f6.js" as="script"><link rel="prefetch" href="/assets/other.html-12de8fcf.js" as="script"><link rel="prefetch" href="/assets/pseudo.html-e2920803.js" as="script"><link rel="prefetch" href="/assets/cache-control.html-e33808d8.js" as="script"><link rel="prefetch" href="/assets/concept.html-dd421e84.js" as="script"><link rel="prefetch" href="/assets/cookie.html-7d946395.js" as="script"><link rel="prefetch" href="/assets/cors.html-d67a8e27.js" as="script"><link rel="prefetch" href="/assets/csp.html-c1b42d3c.js" as="script"><link rel="prefetch" href="/assets/ajax.html-2e7f041b.js" as="script"><link rel="prefetch" href="/assets/bom.html-29a62c34.js" as="script"><link rel="prefetch" href="/assets/code-snippet.html-73b33b30.js" as="script"><link rel="prefetch" href="/assets/concept.html-d7da7a53.js" as="script"><link rel="prefetch" href="/assets/constructor-function.html-740c65ef.js" as="script"><link rel="prefetch" href="/assets/debounce-throttle.html-4e89bfd8.js" as="script"><link rel="prefetch" href="/assets/element.html-652abfe0.js" as="script"><link rel="prefetch" href="/assets/event.html-142f1ab6.js" as="script"><link rel="prefetch" href="/assets/fetch.html-e84e0972.js" as="script"><link rel="prefetch" href="/assets/high-order-function.html-917c4775.js" as="script"><link rel="prefetch" href="/assets/json.html-06299722.js" as="script"><link rel="prefetch" href="/assets/node.html-156bfa37.js" as="script"><link rel="prefetch" href="/assets/object.html-6e988a4d.js" as="script"><link rel="prefetch" href="/assets/operator.html-d9c9067b.js" as="script"><link rel="prefetch" href="/assets/promise.html-6ebef74c.js" as="script"><link rel="prefetch" href="/assets/scope-closure.html-4156b433.js" as="script"><link rel="prefetch" href="/assets/sort.html-5f5d4c0e.js" as="script"><link rel="prefetch" href="/assets/this.html-f21480b5.js" as="script"><link rel="prefetch" href="/assets/value-copy.html-09414f23.js" as="script"><link rel="prefetch" href="/assets/web-component.html-9cc86d33.js" as="script"><link rel="prefetch" href="/assets/basis.html-50d1a7b5.js" as="script"><link rel="prefetch" href="/assets/create-react-app.html-5823fe43.js" as="script"><link rel="prefetch" href="/assets/hook.html-581afc5e.js" as="script"><link rel="prefetch" href="/assets/mobx.html-eea9617e.js" as="script"><link rel="prefetch" href="/assets/react-redux.html-386b8776.js" as="script"><link rel="prefetch" href="/assets/react-router-dom.html-2ff98d18.js" as="script"><link rel="prefetch" href="/assets/redux-toolkit.html-7ff4fc86.js" as="script"><link rel="prefetch" href="/assets/class.html-bfefdd24.js" as="script"><link rel="prefetch" href="/assets/function.html-bb9bcbcb.js" as="script"><link rel="prefetch" href="/assets/narrowing.html-991d2965.js" as="script"><link rel="prefetch" href="/assets/object.html-102798ed.js" as="script"><link rel="prefetch" href="/assets/type-manipulation.html-e86b46ad.js" as="script"><link rel="prefetch" href="/assets/types.html-0da1b8c7.js" as="script"><link rel="prefetch" href="/assets/utility-type.html-90ac2930.js" as="script"><link rel="prefetch" href="/assets/data-transfer.html-a5905df1.js" as="script"><link rel="prefetch" href="/assets/entry-and-version.html-cb0c765f.js" as="script"><link rel="prefetch" href="/assets/global-api.html-959fb8be.js" as="script"><link rel="prefetch" href="/assets/lifecycle.html-07f78db0.js" as="script"><link rel="prefetch" href="/assets/migration.html-cf95aae1.js" as="script"><link rel="prefetch" href="/assets/pinia.html-96f36c44.js" as="script"><link rel="prefetch" href="/assets/vue-instance.html-9ee95dde.js" as="script"><link rel="prefetch" href="/assets/environment.html-f201c84b.js" as="script"><link rel="prefetch" href="/assets/getting-start.html-3dac25e7.js" as="script"><link rel="prefetch" href="/assets/loader.html-d82237a4.js" as="script"><link rel="prefetch" href="/assets/plugin.html-7c178970.js" as="script"><link rel="prefetch" href="/assets/es2015.html-95add46d.js" as="script"><link rel="prefetch" href="/assets/es2016.html-40a156e0.js" as="script"><link rel="prefetch" href="/assets/es2017.html-6bec6922.js" as="script"><link rel="prefetch" href="/assets/es2018.html-b1755d7d.js" as="script"><link rel="prefetch" href="/assets/es2019.html-5b5cc177.js" as="script"><link rel="prefetch" href="/assets/es2020.html-7646d920.js" as="script"><link rel="prefetch" href="/assets/es2021.html-d1f4932c.js" as="script"><link rel="prefetch" href="/assets/es2022.html-9659a15c.js" as="script"><link rel="prefetch" href="/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/assets/index.html-eb7e65c8.js" as="script"><link rel="prefetch" href="/assets/array-arrangement.html-da0a73cb.js" as="script"><link rel="prefetch" href="/assets/combine-ascending-list.html-23a3cffb.js" as="script"><link rel="prefetch" href="/assets/create-brackets.html-9851a316.js" as="script"><link rel="prefetch" href="/assets/devide-two-number.html-a86eff37.js" as="script"><link rel="prefetch" href="/assets/first-match-string-index.html-6bcc8c93.js" as="script"><link rel="prefetch" href="/assets/implement-strStr.html-1fb7d1a8.js" as="script"><link rel="prefetch" href="/assets/int-reverse.html-28c38139.js" as="script"><link rel="prefetch" href="/assets/intersection-of-two-array.html-fc4b0398.js" as="script"><link rel="prefetch" href="/assets/longest-reverse-substring.html-56f32135.js" as="script"><link rel="prefetch" href="/assets/longest-substring-without-repeat.html-a6085f2f.js" as="script"><link rel="prefetch" href="/assets/longest-valid-brackets.html-0a13b916.js" as="script"><link rel="prefetch" href="/assets/matrix-rotate.html-1fef93d9.js" as="script"><link rel="prefetch" href="/assets/max-consecutive-ones.html-c1c1fdfc.js" as="script"><link rel="prefetch" href="/assets/min-sub-array-length.html-70c94dcb.js" as="script"><link rel="prefetch" href="/assets/number-to-roman.html-f4a3a04c.js" as="script"><link rel="prefetch" href="/assets/palindrome-number.html-2f48545b.js" as="script"><link rel="prefetch" href="/assets/phone-number-combine.html-394a2373.js" as="script"><link rel="prefetch" href="/assets/remove-nth-node-from-list.html-5b7c321f.js" as="script"><link rel="prefetch" href="/assets/resolve_sudoko.html-10dd30d7.js" as="script"><link rel="prefetch" href="/assets/reverse-letter-of-word-in-string.html-935f6cb9.js" as="script"><link rel="prefetch" href="/assets/reverse-string-word.html-4bdc44aa.js" as="script"><link rel="prefetch" href="/assets/roman-to-number.html-b3eaaba8.js" as="script"><link rel="prefetch" href="/assets/search-rotate-array-item.html-382d4232.js" as="script"><link rel="prefetch" href="/assets/string-to-number.html-1b36d0e3.js" as="script"><link rel="prefetch" href="/assets/substrings-with-concat.html-c677f8d7.js" as="script"><link rel="prefetch" href="/assets/zero-matrix.html-f493b986.js" as="script"><link rel="prefetch" href="/assets/express.html-ae16fbdb.js" as="script"><link rel="prefetch" href="/assets/koa.html-e38b92cb.js" as="script"><link rel="prefetch" href="/assets/nest.html-bc43a82b.js" as="script"><link rel="prefetch" href="/assets/node.html-85a0d0e4.js" as="script"><link rel="prefetch" href="/assets/add-two-number.html-9101860c.js" as="script"><link rel="prefetch" href="/assets/array-middle-index.html-9880fd43.js" as="script"><link rel="prefetch" href="/assets/array-split.html-51e7437b.js" as="script"><link rel="prefetch" href="/assets/closest-three-number-sum.html-51a00fff.js" as="script"><link rel="prefetch" href="/assets/combine-array-range.html-1d7c3892.js" as="script"><link rel="prefetch" href="/assets/four-number-sum.html-2b7ec9f4.js" as="script"><link rel="prefetch" href="/assets/longest-string-prefix.html-7f42a0a7.js" as="script"><link rel="prefetch" href="/assets/middle-number-of-two-array.html-4c9a8e8c.js" as="script"><link rel="prefetch" href="/assets/remove-array-zero-item.html-cea7c9a9.js" as="script"><link rel="prefetch" href="/assets/remove-repeat-item.html-f7855f39.js" as="script"><link rel="prefetch" href="/assets/remove-specified-element.html-503af51c.js" as="script"><link rel="prefetch" href="/assets/search-insert-index.html-84afcabf.js" as="script"><link rel="prefetch" href="/assets/three-number-sum.html-ac69f5c7.js" as="script"><link rel="prefetch" href="/assets/two-number-sum.html-39d2694d.js" as="script"><link rel="prefetch" href="/assets/valid-sudoku.html-2846d9d9.js" as="script"><link rel="prefetch" href="/assets/water-container.html-f1619a91.js" as="script"><link rel="prefetch" href="/assets/yang-hui-triangle.html-530283ef.js" as="script"><link rel="prefetch" href="/assets/closest-the-number-of-array.html-30e59bc2.js" as="script"><link rel="prefetch" href="/assets/concept.html-86e00673.js" as="script"><link rel="prefetch" href="/assets/find-first-last-index.html-0e42d3b1.js" as="script"><link rel="prefetch" href="/assets/find-max-value.html-49de6934.js" as="script"><link rel="prefetch" href="/assets/find-smallest-letter-bigger-than-target.html-b7821c2a.js" as="script"><link rel="prefetch" href="/assets/find-target-index.html-9a02b102.js" as="script"><link rel="prefetch" href="/assets/first-bad-version.html-e6425d51.js" as="script"><link rel="prefetch" href="/assets/guess-number.html-1b344957.js" as="script"><link rel="prefetch" href="/assets/implement-pow.html-7dd6c640.js" as="script"><link rel="prefetch" href="/assets/negative-number-count-in-grid.html-e4418b8a.js" as="script"><link rel="prefetch" href="/assets/rotate-array.html-5b65742d.js" as="script"><link rel="prefetch" href="/assets/square-root-of-number.html-784362b0.js" as="script"><link rel="prefetch" href="/assets/valid-sqrt-number.html-d77142d7.js" as="script"><link rel="prefetch" href="/assets/appear-once-in-array.html-ece7ad13.js" as="script"><link rel="prefetch" href="/assets/first-unique-character-in-string.html-7187dbc7.js" as="script"><link rel="prefetch" href="/assets/group-anagram.html-b7ba2e6a.js" as="script"><link rel="prefetch" href="/assets/happy-number.html-33c7ceab.js" as="script"><link rel="prefetch" href="/assets/has-repeat-item.html-6ba3aefa.js" as="script"><link rel="prefetch" href="/assets/intersection-of-two-array.html-6232afeb.js" as="script"><link rel="prefetch" href="/assets/is-isomorphism-string.html-73ee7de6.js" as="script"><link rel="prefetch" href="/assets/min-index-sum-of-two-array.html-0d093ae7.js" as="script"><link rel="prefetch" href="/assets/top-k-frequent-number.html-05ed3b9f.js" as="script"><link rel="prefetch" href="/assets/circle-queue.html-f1a528c7.js" as="script"><link rel="prefetch" href="/assets/decode-string.html-445049fc.js" as="script"><link rel="prefetch" href="/assets/evaluate-reverse-polish-expression.html-cdf3b503.js" as="script"><link rel="prefetch" href="/assets/min-stack.html-a11aacd5.js" as="script"><link rel="prefetch" href="/assets/square-number.html-5036f870.js" as="script"><link rel="prefetch" href="/assets/temperature-every-day.html-4e47a23a.js" as="script"><link rel="prefetch" href="/assets/valid-brackets.html-fa341e7b.js" as="script"><link rel="prefetch" href="/assets/concept.html-6b928806.js" as="script"><link rel="prefetch" href="/assets/mongodb.html-fead6a4b.js" as="script"><link rel="prefetch" href="/assets/mongoose.html-87b68d7f.js" as="script"><link rel="prefetch" href="/assets/mongosh.html-36afeb7a.js" as="script"><link rel="prefetch" href="/assets/commander.html-6d62f5db.js" as="script"><link rel="prefetch" href="/assets/formidable.html-f172fe0b.js" as="script"><link rel="prefetch" href="/assets/inquirer.html-8e81c13b.js" as="script"><link rel="prefetch" href="/assets/joi.html-217600b1.js" as="script"><link rel="prefetch" href="/assets/nodemon.html-c338c776.js" as="script"><link rel="prefetch" href="/assets/tapable.html-98998bb2.js" as="script"><link rel="prefetch" href="/assets/animation.html-6c4252fb.js" as="script"><link rel="prefetch" href="/assets/bfc.html-b41919bb.js" as="script"><link rel="prefetch" href="/assets/box.html-df900525.js" as="script"><link rel="prefetch" href="/assets/center.html-634ce7bb.js" as="script"><link rel="prefetch" href="/assets/flex.html-34dde90c.js" as="script"><link rel="prefetch" href="/assets/float.html-02cf0a7d.js" as="script"><link rel="prefetch" href="/assets/grid.html-acdadcc6.js" as="script"><link rel="prefetch" href="/assets/mobile.html-6fad877c.js" as="script"><link rel="prefetch" href="/assets/other.html-10d2376c.js" as="script"><link rel="prefetch" href="/assets/pseudo.html-138a30e0.js" as="script"><link rel="prefetch" href="/assets/cache-control.html-d518f942.js" as="script"><link rel="prefetch" href="/assets/concept.html-8525448e.js" as="script"><link rel="prefetch" href="/assets/cookie.html-273b37e4.js" as="script"><link rel="prefetch" href="/assets/cors.html-c6e4f6f9.js" as="script"><link rel="prefetch" href="/assets/csp.html-00bbcc26.js" as="script"><link rel="prefetch" href="/assets/ajax.html-53100364.js" as="script"><link rel="prefetch" href="/assets/bom.html-6ccd02e3.js" as="script"><link rel="prefetch" href="/assets/code-snippet.html-8c9f09e2.js" as="script"><link rel="prefetch" href="/assets/concept.html-42b379c8.js" as="script"><link rel="prefetch" href="/assets/constructor-function.html-b74b10c6.js" as="script"><link rel="prefetch" href="/assets/debounce-throttle.html-d235efa6.js" as="script"><link rel="prefetch" href="/assets/element.html-d273596f.js" as="script"><link rel="prefetch" href="/assets/event.html-a7208f42.js" as="script"><link rel="prefetch" href="/assets/fetch.html-06700b9e.js" as="script"><link rel="prefetch" href="/assets/high-order-function.html-d39c0ebf.js" as="script"><link rel="prefetch" href="/assets/json.html-3263aa3e.js" as="script"><link rel="prefetch" href="/assets/node.html-dfd8e8f4.js" as="script"><link rel="prefetch" href="/assets/object.html-82ae84fd.js" as="script"><link rel="prefetch" href="/assets/operator.html-a6b041a1.js" as="script"><link rel="prefetch" href="/assets/promise.html-cdb7ae85.js" as="script"><link rel="prefetch" href="/assets/scope-closure.html-8ac6ad52.js" as="script"><link rel="prefetch" href="/assets/sort.html-8e42b504.js" as="script"><link rel="prefetch" href="/assets/this.html-9bae006f.js" as="script"><link rel="prefetch" href="/assets/value-copy.html-08203631.js" as="script"><link rel="prefetch" href="/assets/web-component.html-626d89b4.js" as="script"><link rel="prefetch" href="/assets/basis.html-758e572e.js" as="script"><link rel="prefetch" href="/assets/create-react-app.html-71201196.js" as="script"><link rel="prefetch" href="/assets/hook.html-bf1a354b.js" as="script"><link rel="prefetch" href="/assets/mobx.html-eb1af24d.js" as="script"><link rel="prefetch" href="/assets/react-redux.html-7e20c8d5.js" as="script"><link rel="prefetch" href="/assets/react-router-dom.html-009b88c1.js" as="script"><link rel="prefetch" href="/assets/redux-toolkit.html-bbdf696c.js" as="script"><link rel="prefetch" href="/assets/class.html-4e5d6f58.js" as="script"><link rel="prefetch" href="/assets/function.html-a6b557c0.js" as="script"><link rel="prefetch" href="/assets/narrowing.html-503e1501.js" as="script"><link rel="prefetch" href="/assets/object.html-06d4bc47.js" as="script"><link rel="prefetch" href="/assets/type-manipulation.html-5e60959d.js" as="script"><link rel="prefetch" href="/assets/types.html-fd473e0b.js" as="script"><link rel="prefetch" href="/assets/utility-type.html-f31eb3db.js" as="script"><link rel="prefetch" href="/assets/data-transfer.html-ea1596da.js" as="script"><link rel="prefetch" href="/assets/entry-and-version.html-73e0df93.js" as="script"><link rel="prefetch" href="/assets/global-api.html-85fd20f2.js" as="script"><link rel="prefetch" href="/assets/lifecycle.html-b8c33caa.js" as="script"><link rel="prefetch" href="/assets/migration.html-a8315d47.js" as="script"><link rel="prefetch" href="/assets/pinia.html-2d28a78d.js" as="script"><link rel="prefetch" href="/assets/vue-instance.html-f9f7d703.js" as="script"><link rel="prefetch" href="/assets/environment.html-d05034a9.js" as="script"><link rel="prefetch" href="/assets/getting-start.html-92644528.js" as="script"><link rel="prefetch" href="/assets/loader.html-2905f4f2.js" as="script"><link rel="prefetch" href="/assets/plugin.html-10508b42.js" as="script"><link rel="prefetch" href="/assets/es2015.html-40f77281.js" as="script"><link rel="prefetch" href="/assets/es2016.html-0a35546d.js" as="script"><link rel="prefetch" href="/assets/es2017.html-46c7ae8b.js" as="script"><link rel="prefetch" href="/assets/es2018.html-6d42dc92.js" as="script"><link rel="prefetch" href="/assets/es2019.html-6273a427.js" as="script"><link rel="prefetch" href="/assets/es2020.html-dca5f64c.js" as="script"><link rel="prefetch" href="/assets/es2021.html-a5366a39.js" as="script"><link rel="prefetch" href="/assets/es2022.html-a256a6b2.js" as="script"><link rel="prefetch" href="/assets/404.html-03b69f8b.js" as="script"><link rel="prefetch" href="/assets/Attribute-3ac1b70e.js" as="script"><link rel="prefetch" href="/assets/InsertBefore-31d637fe.js" as="script"><link rel="prefetch" href="/assets/ModalButton-4de08b07.js" as="script"><link rel="prefetch" href="/assets/Event-7204570d.js" as="script"><link rel="prefetch" href="/assets/EventDelegation-b28c81d4.js" as="script"><link rel="prefetch" href="/assets/EventBus-72278cbd.js" as="script"><link rel="prefetch" href="/assets/index-e17aeef8.js" as="script"><link rel="prefetch" href="/assets/BoxSize-c2b87a70.js" as="script"><link rel="prefetch" href="/assets/ScrollBottom-43b8f7ef.js" as="script"><link rel="prefetch" href="/assets/Father-2630b6ab.js" as="script"><link rel="prefetch" href="/assets/Father-1a84ad12.js" as="script"><link rel="prefetch" href="/assets/Father-2cbfb190.js" as="script"><link rel="prefetch" href="/assets/index-ace0d693.js" as="script"><link rel="prefetch" href="/assets/Float-e113f4b4.js" as="script"><link rel="prefetch" href="/assets/FloatLayout-5bf3ca81.js" as="script"><link rel="prefetch" href="/assets/FloatText-04922694.js" as="script"><link rel="prefetch" href="/assets/FloatSilence-630808d9.js" as="script"><link rel="prefetch" href="/assets/Center-5a949375.js" as="script"><link rel="prefetch" href="/assets/RowCenter-b9523c36.js" as="script"><link rel="prefetch" href="/assets/Flex-a53729d5.js" as="script"><link rel="prefetch" href="/assets/FlexColumn-b3973e6b.js" as="script"><link rel="prefetch" href="/assets/FlexGroup-c0a47868.js" as="script"><link rel="prefetch" href="/assets/StickyFooter-e7311002.js" as="script"><link rel="prefetch" href="/assets/Template-f5d2b9a0.js" as="script"><link rel="prefetch" href="/assets/GridItems-4f5084cc.js" as="script"><link rel="prefetch" href="/assets/GridContent-60cc3484.js" as="script"><link rel="prefetch" href="/assets/GridFlow-27c7ed1e.js" as="script"><link rel="prefetch" href="/assets/Before-a84e451b.js" as="script"><link rel="prefetch" href="/assets/Transition-7d073c9b.js" as="script"><link rel="prefetch" href="/assets/Animation-f1f3fb6e.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container" data-v-2def19f4><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">牧童的博客</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/front-end/css/box" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front-end/javascript/bom" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front-end/vue/data-transfer" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front-end/typescript/types" class="" aria-label="TypeScript"><!--[--><!--]--> TypeScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front-end/react/basis" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front-end/webpack/getting-start" class="" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front-end/http/concept" class="" aria-label="HTTP"><!--[--><!--]--> HTTP <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="后端"><span class="title">后端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="后端"><span class="title">后端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/back-end/node" class="" aria-label="Node及框架"><!--[--><!--]--> Node及框架 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/back-end/database/mongosh" class="" aria-label="数据库"><!--[--><!--]--> 数据库 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/back-end/util/tapable" class="" aria-label="Util"><!--[--><!--]--> Util <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/algorithm/longest-substring-without-repeat" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/front-end/css/box" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front-end/javascript/bom" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front-end/vue/data-transfer" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front-end/typescript/types" class="" aria-label="TypeScript"><!--[--><!--]--> TypeScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front-end/react/basis" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front-end/webpack/getting-start" class="" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front-end/http/concept" class="" aria-label="HTTP"><!--[--><!--]--> HTTP <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="后端"><span class="title">后端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="后端"><span class="title">后端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/back-end/node" class="" aria-label="Node及框架"><!--[--><!--]--> Node及框架 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/back-end/database/mongosh" class="" aria-label="数据库"><!--[--><!--]--> 数据库 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/back-end/util/tapable" class="" aria-label="Util"><!--[--><!--]--> Util <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/algorithm/longest-substring-without-repeat" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">CSS <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/front-end/css/box.html" class="sidebar-item" aria-label="盒模型"><!--[--><!--]--> 盒模型 <!--[--><!--]--></a><!----></li><li><a href="/front-end/css/float.html" class="sidebar-item" aria-label="浮动"><!--[--><!--]--> 浮动 <!--[--><!--]--></a><!----></li><li><a href="/front-end/css/flex.html" class="sidebar-item" aria-label="Flex"><!--[--><!--]--> Flex <!--[--><!--]--></a><!----></li><li><a href="/front-end/css/grid.html" class="sidebar-item" aria-label="Grid"><!--[--><!--]--> Grid <!--[--><!--]--></a><!----></li><li><a href="/front-end/css/center.html" class="sidebar-item" aria-label="水平垂直居中"><!--[--><!--]--> 水平垂直居中 <!--[--><!--]--></a><!----></li><li><a href="/front-end/css/mobile.html" class="sidebar-item" aria-label="移动端"><!--[--><!--]--> 移动端 <!--[--><!--]--></a><!----></li><li><a href="/front-end/css/bfc.html" class="sidebar-item" aria-label="BFC"><!--[--><!--]--> BFC <!--[--><!--]--></a><!----></li><li><a href="/front-end/css/pseudo.html" class="sidebar-item" aria-label="伪元素与伪类"><!--[--><!--]--> 伪元素与伪类 <!--[--><!--]--></a><!----></li><li><a href="/front-end/css/animation.html" class="sidebar-item" aria-label="CSS动画"><!--[--><!--]--> CSS动画 <!--[--><!--]--></a><!----></li><li><a href="/front-end/css/other.html" class="sidebar-item" aria-label="CSS属性"><!--[--><!--]--> CSS属性 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">JavaScript <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/front-end/javascript/bom.html" class="sidebar-item" aria-label="BOM"><!--[--><!--]--> BOM <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/event.html" class="sidebar-item" aria-label="Event"><!--[--><!--]--> Event <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/ajax.html" class="sidebar-item" aria-label="Ajax"><!--[--><!--]--> Ajax <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/fetch.html" class="sidebar-item" aria-label="Fetch"><!--[--><!--]--> Fetch <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/constructor-function.html" class="sidebar-item" aria-label="构造函数"><!--[--><!--]--> 构造函数 <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/scope-closure.html" class="sidebar-item" aria-label="作用域和闭包"><!--[--><!--]--> 作用域和闭包 <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/this.html" class="sidebar-item" aria-label="This"><!--[--><!--]--> This <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/operator.html" class="sidebar-item" aria-label="运算符"><!--[--><!--]--> 运算符 <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/high-order-function.html" class="sidebar-item" aria-label="高阶函数"><!--[--><!--]--> 高阶函数 <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/promise.html" class="sidebar-item" aria-label="Promise"><!--[--><!--]--> Promise <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item">ECMAScript语法 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/front-end/javascript/ecmascript/es2015.html" class="sidebar-item" aria-label="ES2015"><!--[--><!--]--> ES2015 <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/ecmascript/es2016.html" class="sidebar-item" aria-label="ES2016"><!--[--><!--]--> ES2016 <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/ecmascript/es2017.html" class="sidebar-item" aria-label="ES2017"><!--[--><!--]--> ES2017 <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/ecmascript/es2018.html" class="sidebar-item" aria-label="ES2018"><!--[--><!--]--> ES2018 <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/ecmascript/es2019.html" class="sidebar-item" aria-label="ES2019"><!--[--><!--]--> ES2019 <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/ecmascript/es2020.html" class="sidebar-item" aria-label="ES2020"><!--[--><!--]--> ES2020 <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/ecmascript/es2021.html" class="sidebar-item" aria-label="ES2021"><!--[--><!--]--> ES2021 <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/ecmascript/es2022.html" class="sidebar-item" aria-label="ES2022"><!--[--><!--]--> ES2022 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/front-end/javascript/concept.html" class="sidebar-item" aria-label="概念"><!--[--><!--]--> 概念 <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/value-copy.html" class="sidebar-item" aria-label="深拷贝与浅拷贝"><!--[--><!--]--> 深拷贝与浅拷贝 <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/json.html" class="sidebar-item" aria-label="JSON"><!--[--><!--]--> JSON <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/debounce-throttle.html" class="sidebar-item" aria-label="函数防抖与函数截流"><!--[--><!--]--> 函数防抖与函数截流 <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/code-snippet.html" class="sidebar-item" aria-label="代码片段"><!--[--><!--]--> 代码片段 <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/node.html" class="sidebar-item" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/element.html" class="sidebar-item" aria-label="Element"><!--[--><!--]--> Element <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/web-component.html" class="sidebar-item" aria-label="WebComponent"><!--[--><!--]--> WebComponent <!--[--><!--]--></a><!----></li><li><a href="/front-end/javascript/object.html" class="sidebar-item" aria-label="Object"><!--[--><!--]--> Object <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">TypeScript <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/front-end/typescript/types.html" class="sidebar-item" aria-label="Types"><!--[--><!--]--> Types <!--[--><!--]--></a><!----></li><li><a href="/front-end/typescript/function.html" class="sidebar-item" aria-label="Function"><!--[--><!--]--> Function <!--[--><!--]--></a><!----></li><li><a href="/front-end/typescript/object.html" class="sidebar-item" aria-label="Object Type"><!--[--><!--]--> Object Type <!--[--><!--]--></a><!----></li><li><a href="/front-end/typescript/narrowing.html" class="sidebar-item" aria-label="Narrowing"><!--[--><!--]--> Narrowing <!--[--><!--]--></a><!----></li><li><a href="/front-end/typescript/type-manipulation.html" class="sidebar-item" aria-label="Type Manipulation"><!--[--><!--]--> Type Manipulation <!--[--><!--]--></a><!----></li><li><a href="/front-end/typescript/class.html" class="sidebar-item" aria-label="Class"><!--[--><!--]--> Class <!--[--><!--]--></a><!----></li><li><a href="/front-end/typescript/utility-type.html" class="sidebar-item" aria-label="Utility Types"><!--[--><!--]--> Utility Types <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Vue <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/front-end/vue/data-transfer.html" class="sidebar-item" aria-label="组件通信"><!--[--><!--]--> 组件通信 <!--[--><!--]--></a><!----></li><li><a href="/front-end/vue/lifecycle.html" class="sidebar-item" aria-label="生命周期"><!--[--><!--]--> 生命周期 <!--[--><!--]--></a><!----></li><li><a href="/front-end/vue/migration.html" class="sidebar-item" aria-label="Vue2.x迁移"><!--[--><!--]--> Vue2.x迁移 <!--[--><!--]--></a><!----></li><li><a href="/front-end/vue/pinia.html" class="sidebar-item" aria-label="Pinia"><!--[--><!--]--> Pinia <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">React <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/front-end/react/basis.html" class="sidebar-item" aria-label="React基础"><!--[--><!--]--> React基础 <!--[--><!--]--></a><!----></li><li><a href="/front-end/react/hook.html" class="sidebar-item" aria-label="Hooks"><!--[--><!--]--> Hooks <!--[--><!--]--></a><!----></li><li><a href="/front-end/react/create-react-app.html" class="sidebar-item" aria-label="create-react-app"><!--[--><!--]--> create-react-app <!--[--><!--]--></a><!----></li><li><a href="/front-end/react/react-router-dom.html" class="sidebar-item" aria-label="react-router-dom"><!--[--><!--]--> react-router-dom <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front-end/react/redux.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Redux"><!--[--><!--]--> Redux <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/front-end/react/redux.html#immutability" class="router-link-active router-link-exact-active sidebar-item" aria-label="Immutability"><!--[--><!--]--> Immutability <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front-end/react/redux.html#actions" class="router-link-active router-link-exact-active sidebar-item" aria-label="Actions"><!--[--><!--]--> Actions <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front-end/react/redux.html#reducers" class="router-link-active router-link-exact-active sidebar-item" aria-label="Reducers"><!--[--><!--]--> Reducers <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front-end/react/redux.html#store" class="router-link-active router-link-exact-active sidebar-item" aria-label="Store"><!--[--><!--]--> Store <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front-end/react/redux.html#combinereducers" class="router-link-active router-link-exact-active sidebar-item" aria-label="combineReducers"><!--[--><!--]--> combineReducers <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front-end/react/redux.html#applymiddleware" class="router-link-active router-link-exact-active sidebar-item" aria-label="applyMiddleware"><!--[--><!--]--> applyMiddleware <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front-end/react/redux.html#mini-redux" class="router-link-active router-link-exact-active sidebar-item" aria-label="mini-redux"><!--[--><!--]--> mini-redux <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/front-end/react/react-redux.html" class="sidebar-item" aria-label="React Redux"><!--[--><!--]--> React Redux <!--[--><!--]--></a><!----></li><li><a href="/front-end/react/redux-toolkit.html" class="sidebar-item" aria-label="Redux ToolKit"><!--[--><!--]--> Redux ToolKit <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Webpack <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/front-end/webpack/getting-start.html" class="sidebar-item" aria-label="getting start"><!--[--><!--]--> getting start <!--[--><!--]--></a><!----></li><li><a href="/front-end/webpack/loader.html" class="sidebar-item" aria-label="loader"><!--[--><!--]--> loader <!--[--><!--]--></a><!----></li><li><a href="/front-end/webpack/plugin.html" class="sidebar-item" aria-label="plugins"><!--[--><!--]--> plugins <!--[--><!--]--></a><!----></li><li><a href="/front-end/webpack/environment.html" class="sidebar-item" aria-label="开发环境"><!--[--><!--]--> 开发环境 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">HTTP <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/front-end/http/concept.html" class="sidebar-item" aria-label="概念与知识点"><!--[--><!--]--> 概念与知识点 <!--[--><!--]--></a><!----></li><li><a href="/front-end/http/cache-control.html" class="sidebar-item" aria-label="缓存"><!--[--><!--]--> 缓存 <!--[--><!--]--></a><!----></li><li><a href="/front-end/http/cookie.html" class="sidebar-item" aria-label="Cookie"><!--[--><!--]--> Cookie <!--[--><!--]--></a><!----></li><li><a href="/front-end/http/cors.html" class="sidebar-item" aria-label="Cors"><!--[--><!--]--> Cors <!--[--><!--]--></a><!----></li><li><a href="/front-end/http/csp.html" class="sidebar-item" aria-label="CSP"><!--[--><!--]--> CSP <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="redux" tabindex="-1"><a class="header-anchor" href="#redux" aria-hidden="true">#</a> Redux</h1><p>Redux is a library for managing global application state</p><h2 id="immutability" tabindex="-1"><a class="header-anchor" href="#immutability" aria-hidden="true">#</a> Immutability</h2><p>&#39;Mutable&#39; means &#39;changeable&#39;,If something is &#39;immutable&#39;, It can never be changed. In order to update values immutably,your code must make copies of existing objects/arrays,and then modify the copies. We can do this by hand using JavaScript&#39;s array/object spread operators.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki monokai" style="background-color:#272822;" tabindex="0"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> obj </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> {a:</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">, b:</span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#F8F8F2;">obj.a </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">3</span></span>
<span class="line"><span style="color:#88846F;">// still the same object outside,but the contents have changed</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> arr </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> [</span><span style="color:#E6DB74;">&#39;a&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&#39;b&#39;</span><span style="color:#F8F8F2;">]</span></span>
<span class="line"><span style="color:#F8F8F2;">arr.</span><span style="color:#A6E22E;">push</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;c&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">In the same way, we can change the contents </span><span style="color:#F92672;">of</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;"> array.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki monokai" style="background-color:#272822;" tabindex="0"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> obj </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  a: {</span></span>
<span class="line"><span style="color:#F8F8F2;">    c: </span><span style="color:#AE81FF;">3</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"><span style="color:#F8F8F2;">  b: </span><span style="color:#AE81FF;">2</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> obj2 </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">...</span><span style="color:#F8F8F2;">obj,</span></span>
<span class="line"><span style="color:#F8F8F2;">  a: {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">...</span><span style="color:#F8F8F2;">obj.a,</span></span>
<span class="line"><span style="color:#F8F8F2;">    c: </span><span style="color:#AE81FF;">42</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="actions" tabindex="-1"><a class="header-anchor" href="#actions" aria-hidden="true">#</a> Actions</h2><p>An action is a plain JavaScript objet that has a type filed.The type filed should be a string that gives this action a descriptive name,like &#39;todos/todoAdded&#39;, ------- &#39;domain/eventName&#39;。</p><p>An action creator is a function that creates and returns an action object.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki monokai" style="background-color:#272822;" tabindex="0"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">addTodo</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;font-style:italic;">text</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    type: </span><span style="color:#E6DB74;">&#39;todos/todoAdded&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    payload:text</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="reducers" tabindex="-1"><a class="header-anchor" href="#reducers" aria-hidden="true">#</a> Reducers</h2><p>A reducer is a function that receives the current state and an action object,decides how to update the state if necessary. and returns the new state:(state,action) =&gt; newState.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki monokai" style="background-color:#272822;" tabindex="0"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> initialState </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> {value: </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">counterReducer</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">state</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> initialState, </span><span style="color:#FD971F;font-style:italic;">action</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(action.type </span><span style="color:#F92672;">===</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;counter/increment&#39;</span><span style="color:#F8F8F2;">){</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">...</span><span style="color:#F8F8F2;">state,</span></span>
<span class="line"><span style="color:#F8F8F2;">      value: state.value </span><span style="color:#F92672;">+</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">1</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> state</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="store" tabindex="-1"><a class="header-anchor" href="#store" aria-hidden="true">#</a> Store</h2><p>The store is created by passing in a reducer. createStore to actually create a Redux store.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki monokai" style="background-color:#272822;" tabindex="0"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> { createStore } </span><span style="color:#F92672;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;redux&#39;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> store </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">createStore</span><span style="color:#F8F8F2;">(reducer)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>一个应用程序只能有一个store, 可以使用combineReducers 合并多个reducer。更改store状态的唯一方式是派发action。 你也可以通过store.subscribe() 订阅状态的更新。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki monokai" style="background-color:#272822;" tabindex="0"><code><span class="line"><span style="color:#88846F;">// usage</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">todos</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">state</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> [], </span><span style="color:#FD971F;font-style:italic;">action</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">switch</span><span style="color:#F8F8F2;"> (action.type) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">case</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;ADD_TODO&#39;</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> state.</span><span style="color:#A6E22E;">concat</span><span style="color:#F8F8F2;">([action.text])</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">default</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> state</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> store </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">createStore</span><span style="color:#F8F8F2;">(todos, [</span><span style="color:#E6DB74;">&#39;Use Redux&#39;</span><span style="color:#F8F8F2;">])</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki monokai" style="background-color:#272822;" tabindex="0"><code><span class="line"><span style="color:#88846F;">// store&#39;s Api</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> state </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> store.</span><span style="color:#A6E22E;">getState</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#88846F;">/*</span></span>
<span class="line"><span style="color:#88846F;">返回当前store的状态。</span></span>
<span class="line"><span style="color:#88846F;">*/</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// dispatch</span></span>
<span class="line"><span style="color:#88846F;">/*</span></span>
<span class="line"><span style="color:#88846F;">dispatches an action, This is the only way to trigger a state change。</span></span>
<span class="line"><span style="color:#88846F;">*/</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> store </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">createStore</span><span style="color:#F8F8F2;">(todos, [</span><span style="color:#E6DB74;">&#39;Use Redux&#39;</span><span style="color:#F8F8F2;">])</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">addTodo</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;font-style:italic;">text</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> ({type: </span><span style="color:#E6DB74;">&#39;ADD_TODO&#39;</span><span style="color:#F8F8F2;">, text})</span></span>
<span class="line"><span style="color:#F8F8F2;">store.</span><span style="color:#A6E22E;">dispatch</span><span style="color:#F8F8F2;">(</span><span style="color:#A6E22E;">addTodo</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;Hello World&#39;</span><span style="color:#F8F8F2;">))</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// subscribe</span></span>
<span class="line"><span style="color:#88846F;">/*</span></span>
<span class="line"><span style="color:#88846F;">It will be called any time an action is dispatched.</span></span>
<span class="line"><span style="color:#88846F;">*/</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> unsubscribe </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> store.</span><span style="color:#A6E22E;">subscribe</span><span style="color:#F8F8F2;">(() </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(store.</span><span style="color:#A6E22E;">getState</span><span style="color:#F8F8F2;">())</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"><span style="color:#88846F;">// 如果要取消订阅, 可以执行store.subscribe() 返回的函数</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="combinereducers" tabindex="-1"><a class="header-anchor" href="#combinereducers" aria-hidden="true">#</a> combineReducers</h2><p>如果你的项目变得越来越复杂, 需要维护的状态越来越多, 可以使用combineReducers来组织你的reducer, 可以将不同的状态维护切分为比较小的reducer。 combineReducers接受一个对象, 对象的每个字段都是一个reducer。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki monokai" style="background-color:#272822;" tabindex="0"><code><span class="line"><span style="color:#88846F;">// example</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> rootReducer </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">combineReducers</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">  users: usersReducer,</span></span>
<span class="line"><span style="color:#F8F8F2;">  posts: postsReducer,</span></span>
<span class="line"><span style="color:#F8F8F2;">  comments: commentsReducer</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The key names in the object will define the keys in our final state value. When we pass in an object like {counter:counterReducer}, that says we want to have a state.counter section of our Redux state object.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki monokai" style="background-color:#272822;" tabindex="0"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">combineReducers</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">reducers</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">Object</span><span style="color:#F8F8F2;">.prototype.toString.</span><span style="color:#A6E22E;">call</span><span style="color:#F8F8F2;">(reducers) </span><span style="color:#F92672;">!==</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;[object Object]&#39;</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">throw</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">Error</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;arguments must be a object&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> reducer_keys </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> Object.</span><span style="color:#A6E22E;">keys</span><span style="color:#F8F8F2;">(reducers)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">let</span><span style="color:#F8F8F2;"> i </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, length </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> reducer_keys.length; i </span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;"> length; i</span><span style="color:#F92672;">++</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> reducer </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> reducers[reducer_keys[i]]</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">typeof</span><span style="color:#F8F8F2;"> reducer </span><span style="color:#F92672;">!==</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;function&#39;</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">throw</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">Error</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;reducer must be a function&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// 这里的state是root state</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">state</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">action</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> nextState </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> {}</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">let</span><span style="color:#F8F8F2;"> i </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, length </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> reducer_keys.length; i </span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;"> length; i</span><span style="color:#F92672;">++</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> key </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> reducer_keys[i]</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> reducer </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> reducers[key]</span></span>
<span class="line"><span style="color:#F8F8F2;">      nextState[key] </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">reducer</span><span style="color:#F8F8F2;">(state[key], action)</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> nextState</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="applymiddleware" tabindex="-1"><a class="header-anchor" href="#applymiddleware" aria-hidden="true">#</a> applyMiddleware</h2><p>applyMiddleware 是一个用来扩展redux的方法.一般来说,如果需要触发异步的action, 需要使用中间件。 如果需要使用多个中间件, 可以依次传递给applyMiddleware, 将返回结果作为参数传递到 createStore。</p><p>每一个中间件会接受 store&#39;s dispatch 和 getState 函数。 并且返回一个函数。 该函数接受一个next参数(middleware&#39;s dispatch methods) 并且返回一个调用 next(action)就会触发dispatch。 中间件的 方式 （{getState, dispatch}） =&gt; next =&gt; action.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki monokai" style="background-color:#272822;" tabindex="0"><code><span class="line"><span style="color:#88846F;">// usage</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// 一个打印redux日志的中间件</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">logger</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;font-style:italic;">store</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;font-style:italic;">next</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;font-style:italic;">action</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(store.</span><span style="color:#A6E22E;">getState</span><span style="color:#F8F8F2;">(), action.type)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">next</span><span style="color:#F8F8F2;">(action)  </span><span style="color:#88846F;">// 一定要调用next(action)</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> { applyMiddleware, createStore } </span><span style="color:#F92672;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;redux&#39;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> store </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">createStore</span><span style="color:#F8F8F2;">(reducer, </span><span style="color:#A6E22E;">applyMiddleware</span><span style="color:#F8F8F2;">(logger))</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果是一个异步操作, 可以actionCreator 返回的不是一个对象,而是一个函数, 该函数会接受dispatch 和 getState作为参数。 当异步操作完成后再调用 next(action)。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki monokai" style="background-color:#272822;" tabindex="0"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> { applyMiddleware, createStore } </span><span style="color:#F92672;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;redux&#39;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">increment_async</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> (</span><span style="color:#FD971F;font-style:italic;">dispatch</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">getState</span><span style="color:#F8F8F2;">) </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#A6E22E;">setTimeout</span><span style="color:#F8F8F2;">(() </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#A6E22E;">dispatch</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">        type: </span><span style="color:#E6DB74;">&#39;increment&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">      })</span></span>
<span class="line"><span style="color:#F8F8F2;">    }, </span><span style="color:#AE81FF;">2000</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">thunk</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;font-style:italic;">store</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;font-style:italic;">next</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;font-style:italic;">action</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">typeof</span><span style="color:#F8F8F2;"> action </span><span style="color:#F92672;">===</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;function&#39;</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">action</span><span style="color:#F8F8F2;">(store.dispatch, store.getState)</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">next</span><span style="color:#F8F8F2;">(action)</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> store </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">createStore</span><span style="color:#F8F8F2;">(reducer, </span><span style="color:#A6E22E;">applyMiddleware</span><span style="color:#F8F8F2;">(thunk))</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mini-redux" tabindex="-1"><a class="header-anchor" href="#mini-redux" aria-hidden="true">#</a> mini-redux</h2><p>一个简易的redux</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki monokai" style="background-color:#272822;" tabindex="0"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">createStore</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">reducer</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">initialState</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// 验证reducer是否是一个函数</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">typeof</span><span style="color:#F8F8F2;"> reducer </span><span style="color:#F92672;">!==</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;function&#39;</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">throw</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">Error</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;reducer must be function&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">let</span><span style="color:#F8F8F2;"> state </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> initialState </span><span style="color:#88846F;">// 初始state</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> listener_cbs </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> []</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">getState</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> state</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">subscribe</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">cb</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    listener_cbs.</span><span style="color:#A6E22E;">push</span><span style="color:#F8F8F2;">(cb)</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">dispatch</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">action</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#88846F;">// 验证action是否是对象, 并且是否有type 字段</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> type </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">Object</span><span style="color:#F8F8F2;">.prototype.toString.</span><span style="color:#A6E22E;">call</span><span style="color:#F8F8F2;">(action)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(type </span><span style="color:#F92672;">!==</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;[object Object]&#39;</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">throw</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">Error</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;action must be object&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">!</span><span style="color:#66D9EF;font-style:italic;">Object</span><span style="color:#F8F8F2;">.prototype.hasOwnProperty.</span><span style="color:#A6E22E;">call</span><span style="color:#F8F8F2;">(action, </span><span style="color:#E6DB74;">&#39;type&#39;</span><span style="color:#F8F8F2;">)) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">throw</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">Error</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;action must have a field type&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">    state </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">reducer</span><span style="color:#F8F8F2;">(state, action)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(listener_cbs.length) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      listener_cbs.</span><span style="color:#A6E22E;">forEach</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">listener</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#A6E22E;">listener</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#F8F8F2;">      })</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    getState,</span></span>
<span class="line"><span style="color:#F8F8F2;">    subscribe,</span></span>
<span class="line"><span style="color:#F8F8F2;">    dispatch</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html"><pre class="shiki monokai" style="background-color:#272822;" tabindex="0"><code><span class="line"><span style="color:#88846F;">&lt;!-- 验证 --&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">div</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">id</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&#39;mini-redux-app&#39;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">class</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&#39;decrement-button&#39;</span><span style="color:#F8F8F2;">&gt;-&lt;/</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">span</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">class</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;count&quot;</span><span style="color:#F8F8F2;">&gt;&lt;/</span><span style="color:#F92672;">span</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">class</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&#39;increment-button&#39;</span><span style="color:#F8F8F2;">&gt;+&lt;/</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">div</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">script</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">reducer</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">state</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">action</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> { type, payload } </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> action</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">switch</span><span style="color:#F8F8F2;">(type) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">case</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;increment&#39;</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> state</span><span style="color:#F92672;">+</span><span style="color:#AE81FF;">1</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">case</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;decrement&#39;</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> state</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">1</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">default</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> state</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> { getState, subscribe, dispatch } </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">createStore</span><span style="color:#F8F8F2;">(reducer, </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> increment_button </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;#mini-redux-app .increment-button&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> decrement_button </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;#mini-redux-app .decrement-button&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  increment_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, () </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#A6E22E;">dispatch</span><span style="color:#F8F8F2;">({type: </span><span style="color:#E6DB74;">&#39;increment&#39;</span><span style="color:#F8F8F2;">})</span></span>
<span class="line"><span style="color:#F8F8F2;">  }, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  decrement_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, () </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#A6E22E;">dispatch</span><span style="color:#F8F8F2;">({type: </span><span style="color:#E6DB74;">&#39;decrement&#39;</span><span style="color:#F8F8F2;">})</span></span>
<span class="line"><span style="color:#F8F8F2;">  })</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">subscribe</span><span style="color:#F8F8F2;">(() </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;#mini-redux-app .count&#39;</span><span style="color:#F8F8F2;">).textContent </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">getState</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#F8F8F2;">  })</span></span>
<span class="line"><span style="color:#F8F8F2;">  document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;#mini-redux-app .count&#39;</span><span style="color:#F8F8F2;">).textContent </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">getState</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">script</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的redux 暂时无法触发异步action, 可以传递第三个参数对 createStore进行增强</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki monokai" style="background-color:#272822;" tabindex="0"><code><span class="line"><span style="color:#88846F;">// 如果触发的是异步action, action是一个函数, 所以上面的代码action 判断是否是对象需要换个地方</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">createStore</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">reducer</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">initialState</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">enhancer</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// ...</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">let</span><span style="color:#F8F8F2;"> state </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> initialState</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(enhancer </span><span style="color:#F92672;">!==</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">undefined</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">typeof</span><span style="color:#F8F8F2;"> enhancer </span><span style="color:#F92672;">!==</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;function&#39;</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">throw</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">Error</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;enhancer must be function&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">enhancer</span><span style="color:#F8F8F2;">(createStore)(reducer,initialState)</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// ...</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">enhancer</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">createStore</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// 通过传递过来的createStore再执行上面的逻辑, 此时不再传递第三个参数.</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> (</span><span style="color:#FD971F;font-style:italic;">reducer</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">initialState</span><span style="color:#F8F8F2;">) </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> store </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">createStore</span><span style="color:#F8F8F2;">(reducer, initialState)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> dispatch </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> store.dispatch</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">_dispatch</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">action</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">typeof</span><span style="color:#F8F8F2;"> action </span><span style="color:#F92672;">===</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;function&#39;</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#88846F;">// 将dispatch 作为action的第一个参数, 当异步操作完成时, 再进行dispatch</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">action</span><span style="color:#F8F8F2;">(dispatch)</span></span>
<span class="line"><span style="color:#F8F8F2;">      } </span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">Object</span><span style="color:#F8F8F2;">.prototype.toString.</span><span style="color:#A6E22E;">call</span><span style="color:#F8F8F2;">(action) </span><span style="color:#F92672;">!==</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;[object Object]&#39;</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">          </span><span style="color:#F92672;">throw</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">Error</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;action must be object&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">        }</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">dispatch</span><span style="color:#F8F8F2;">(action)</span></span>
<span class="line"><span style="color:#F8F8F2;">      }</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">...</span><span style="color:#F8F8F2;">store,</span></span>
<span class="line"><span style="color:#F8F8F2;">      dispatch: _dispatch</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Each middlewares receives Store&#39;s dispatch and getState functions as names arguments. The last middleware in the chain will receive the real store&#39;s dispatch method as the next parameter. So, the middleware signature is ({getState, dispatch}) =&gt; next =&gt; action.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki monokai" style="background-color:#272822;" tabindex="0"><code><span class="line"><span style="color:#88846F;">// applyMiddleware 实现</span></span>
<span class="line"><span style="color:#88846F;">// 中间件</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">logger</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;font-style:italic;">store</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;font-style:italic;">next</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;font-style:italic;">action</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;logger&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">next</span><span style="color:#F8F8F2;">(action)</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">thunk</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;font-style:italic;">store</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;font-style:italic;">next</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;font-style:italic;">action</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;thunk&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">next</span><span style="color:#F8F8F2;">(action)</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">middleware</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">store</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">next</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">action</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;middleware&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#A6E22E;">next</span><span style="color:#F8F8F2;">(action)</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">applyMiddleware</span><span style="color:#F8F8F2;">() {  </span><span style="color:#88846F;">// 所有中间件</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> middlewares </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> Array.</span><span style="color:#A6E22E;">from</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">arguments</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#FD971F;font-style:italic;">createStore</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> (</span><span style="color:#FD971F;font-style:italic;">reducer</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">initialState</span><span style="color:#F8F8F2;">) </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> { dispatch, getState, subscribe } </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">createStore</span><span style="color:#F8F8F2;">(reducer, initialState)</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> chain_function_array </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> middlewares.</span><span style="color:#A6E22E;">map</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">middleware</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">middleware</span><span style="color:#F8F8F2;">({dispatch, getState}))</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> _dispatch </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">compose</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">...</span><span style="color:#F8F8F2;">chain_function_array)(dispatch)</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">        getState,</span></span>
<span class="line"><span style="color:#F8F8F2;">        dispatch:_dispatch,</span></span>
<span class="line"><span style="color:#F8F8F2;">        subscribe</span></span>
<span class="line"><span style="color:#F8F8F2;">      }</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">compose</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> funs </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> Array.</span><span style="color:#A6E22E;">from</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">arguments</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">dispatch</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">let</span><span style="color:#F8F8F2;"> i </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> funs.length </span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">; i </span><span style="color:#F92672;">&gt;=</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">; i</span><span style="color:#F92672;">--</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      dispatch </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> funs[i](dispatch)</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> dispatch</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/front-end/react/react-router-dom.html" class="" aria-label="react-router-dom"><!--[--><!--]--> react-router-dom <!--[--><!--]--></a></span><span class="next"><a href="/front-end/react/react-redux.html" class="" aria-label="React Redux"><!--[--><!--]--> React Redux <!--[--><!--]--></a></span></p></nav><!--[--><!--[--><div class="page-footer" data-v-2def19f4><a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank" data-v-2def19f4>浙ICP备20001796号-1</a><div style="padding-top:8px;" data-v-2def19f4><span data-v-2def19f4>Powred by <a href="https://v2.vuepress.vuejs.org/zh/" target="_blank" data-v-2def19f4>VuePress v2.0.0</a></span><i data-v-2def19f4>|</i><span data-v-2def19f4><a href="https://www.naiveui.com/zh-CN/os-theme" target="_blank" data-v-2def19f4>Naive UI v2.34.3</a></span></div></div><!--]--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-ec006255.js" defer></script>
  </body>
</html>
