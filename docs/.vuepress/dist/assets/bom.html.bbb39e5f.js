import{_ as c,r as s,o as t,c as F,a as n,w as r,b as l,e as a,d as i}from"./app.cae4c64a.js";const y={},d=a(`<h1 id="bom" tabindex="-1"><a class="header-anchor" href="#bom" aria-hidden="true">#</a> BOM</h1><p>\u6D4F\u89C8\u5668\u5BF9\u8C61\u6A21\u578B(Browser Object Model)\u3002</p><h2 id="window\u5BF9\u8C61" tabindex="-1"><a class="header-anchor" href="#window\u5BF9\u8C61" aria-hidden="true">#</a> window\u5BF9\u8C61</h2><p>\u6240\u6709\u6D4F\u89C8\u5668\u90FD\u652F\u6301window\u5BF9\u8C61\u3002\u5B83\u8868\u793A\u6D4F\u89C8\u5668\u7A97\u53E3\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">window.innerWidth </span><span style="color:#88846F;">// \u6D4F\u89C8\u5668\u7A97\u53E3\u7684\u5185\u90E8\u5BBD\u5EA6</span></span>
<span class="line"><span style="color:#F8F8F2;">window.innerHeight </span><span style="color:#88846F;">// \u6D4F\u89C8\u5668\u7A97\u53E3\u7684\u5185\u90E8\u9AD8\u5EA6</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u4E8EIE 8 7 6 5:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">document.documentElement.clientWidth</span><span style="color:#F92672;">/</span><span style="color:#F8F8F2;">document.documentElement.clientHeight</span></span>
<span class="line"><span style="color:#F8F8F2;">document.body.clientWidth </span><span style="color:#F92672;">/</span><span style="color:#F8F8F2;"> document.body.clientHeight</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6253\u5F00\u4E00\u4E2A\u5F39\u7A97" tabindex="-1"><a class="header-anchor" href="#\u6253\u5F00\u4E00\u4E2A\u5F39\u7A97" aria-hidden="true">#</a> \u6253\u5F00\u4E00\u4E2A\u5F39\u7A97</h3><p>\u7ECF\u5E38\u4F1A\u6709\u5728\u5F53\u524D\u9875\u9762\u6253\u5F00\u5F39\u7A97\u67E5\u770B\u67D0\u4E9B\u4FE1\u606F\u7684\u9700\u6C42\u3002 \u6709\u65F6\uFF0C\u5728\u6253\u5F00\u5F39\u7A97\u7684\u60C5\u51B5\u4E0B, \u9875\u9762\u5185\u5BB9\u4F9D\u7136\u53EF\u4EE5\u6EDA\u52A8,\u8FD9\u65F6\u9700\u8981\u505A\u4E00\u4E2A\u5224\u65AD, \u5728\u6709\u6EDA\u52A8\u6761\u7684\u65F6\u5019\u9690\u85CF\u6EDA\u52A8\u6761,\u5E76\u4E14\u9632\u6B62\u9690\u85CF\u6EDA\u52A8\u6761\u65F6\u9875\u9762\u5185\u5BB9\u6296\u52A8\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;">// --------- \u5224\u65AD\u9875\u9762\u662F\u5426\u6709\u6EDA\u52A8\u6761 -------</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">hasScrollbar</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">  document.body.scrollHeight </span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;"> (</span></span>
<span class="line"><span style="color:#F8F8F2;">    window.innerHeight </span><span style="color:#F92672;">||</span><span style="color:#F8F8F2;"> document.documentElement.clientHeight</span></span>
<span class="line"><span style="color:#F8F8F2;">  )</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// --------\u83B7\u53D6\u6EDA\u52A8\u6761\u7684\u5BBD\u5EA6 --------</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">getScrollBarWidth</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> div </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">createElement</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;div&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  div.style.cssText </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;position:absolute;top:-9999px;&#39;</span><span style="color:#F92672;">+</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#E6DB74;">&#39;width:100px;height:100px;overflow:scroll;&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">  document.body.</span><span style="color:#A6E22E;">appendChild</span><span style="color:#F8F8F2;">(div)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> scrollBarWidth </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> div.offsetWidth </span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;"> div.clientWidth;</span></span>
<span class="line"><span style="color:#F8F8F2;">  document.body.</span><span style="color:#A6E22E;">removeChild</span><span style="color:#F8F8F2;">(div)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> scrollBarWidth;</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10),v=a(`<h3 id="\u5168\u5C40\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#\u5168\u5C40\u53D8\u91CF" aria-hidden="true">#</a> \u5168\u5C40\u53D8\u91CF</h3><p>\u901A\u8FC7var\u5B9A\u4E49\u7684\u5168\u5C40\u53D8\u91CF\u4E0D\u80FD\u901A\u8FC7delete\u64CD\u4F5C\u7B26\u5220\u9664,\u800Cwindow\u5C5E\u6027\u4E0A\u5B9A\u4E49\u7684\u53D8\u91CF\u53EF\u4EE5\u5220\u9664\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">var</span><span style="color:#F8F8F2;"> firstName </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;kyrie&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">window.lastName </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;irving&#39;</span></span>
<span class="line"><span style="color:#F92672;">delete</span><span style="color:#F8F8F2;"> firstName;</span></span>
<span class="line"><span style="color:#F92672;">delete</span><span style="color:#F8F8F2;"> lastName;</span></span>
<span class="line"><span style="color:#F8F8F2;">console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(firstName, window.lastName)  </span><span style="color:#88846F;">// kyrie undefined</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u901A\u8FC7Object.getOwnPropertyDescriptor()\u83B7\u53D6\u4E00\u4E2A\u5BF9\u8C61\u7684\u5C5E\u6027\u6807\u8BC6\u7B26\u3002\u901A\u8FC7var\u5B9A\u4E49\u7684\u5168\u5C40\u53D8\u91CF \u7684\u914D\u7F6Econfigure\u4E3Afalse,\u800C\u624B\u52A8\u5728window\u4E0A\u6DFB\u52A0\u7684\u5C5E\u6027configure\u4E3Atrue.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">Object</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">getOwnPropertyDescriptor</span><span style="color:#F8F8F2;">(window,</span><span style="color:#E6DB74;">&#39;firstName&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#88846F;">/*</span></span>
<span class="line"><span style="color:#88846F;">configurable: false</span></span>
<span class="line"><span style="color:#88846F;">enumerable: true</span></span>
<span class="line"><span style="color:#88846F;">value: &quot;kyrie&quot;</span></span>
<span class="line"><span style="color:#88846F;">writable: true</span></span>
<span class="line"><span style="color:#88846F;">*/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">Object</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">getOwnPropertyDescriptor</span><span style="color:#F8F8F2;">(window,</span><span style="color:#E6DB74;">&#39;lastName&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#88846F;">/*</span></span>
<span class="line"><span style="color:#88846F;">configurable: true</span></span>
<span class="line"><span style="color:#88846F;">enumerable: true</span></span>
<span class="line"><span style="color:#88846F;">value: &quot;irving&quot;</span></span>
<span class="line"><span style="color:#88846F;">writable: true</span></span>
<span class="line"><span style="color:#88846F;">*/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="location" tabindex="-1"><a class="header-anchor" href="#location" aria-hidden="true">#</a> Location</h2><p>window.location \u5BF9\u8C61\u7528\u4E8E\u83B7\u5F97\u5F53\u524D\u9875\u9762\u7684\u5730\u5740 (URL) Location\u5BF9\u8C61\u7684href\u5C5E\u6027\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32,\u5305\u542BURL\u7684\u5B8C\u6574\u6587\u672C\u3002Location\u5BF9\u8C61\u7684toString()\u65B9\u6CD5\u8FD4\u56DEhref\u7684\u5C5E\u6027\u503C\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">parseUrl</span><span style="color:#F8F8F2;">(){</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> args </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> {}</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> query </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> window.location.search.</span><span style="color:#A6E22E;">substring</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> paris </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> query.</span><span style="color:#A6E22E;">split</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;&amp;&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">let</span><span style="color:#F8F8F2;"> i </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, length </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> paris.length; i </span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">length; i</span><span style="color:#F92672;">++</span><span style="color:#F8F8F2;">){</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> pos </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> paris[i].</span><span style="color:#A6E22E;">indexOf</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;=&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(pos </span><span style="color:#F92672;">===</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">) </span><span style="color:#F92672;">continue</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> name </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> paris.</span><span style="color:#A6E22E;">substring</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">,pos);</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> value </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> paris.</span><span style="color:#A6E22E;">substring</span><span style="color:#F8F8F2;">(pos</span><span style="color:#F92672;">+</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    args[name] </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">decodeURIComponent</span><span style="color:#F8F8F2;">(value)</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> args</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5B9A\u65F6\u5668" tabindex="-1"><a class="header-anchor" href="#\u5B9A\u65F6\u5668" aria-hidden="true">#</a> \u5B9A\u65F6\u5668</h2><p>window.setTimeout() \u5B9A\u65F6\u5668\u5230\u671F\u540E\u6267\u884C\u4E00\u4E2A\u51FD\u6570\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">var</span><span style="color:#F8F8F2;"> timeoutID </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> scope.</span><span style="color:#A6E22E;">setTimeout</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">[, </span><span style="color:#A6E22E;">delay</span><span style="color:#F8F8F2;">, </span><span style="color:#A6E22E;">arg1</span><span style="color:#F8F8F2;">, </span><span style="color:#A6E22E;">arg2</span><span style="color:#F8F8F2;">, ...]);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD4\u56DE\u503CtimeoutID\u662F\u4E00\u4E2A\u6B63\u6574\u6570,\u8868\u793A\u5B9A\u65F6\u5668\u7684\u7F16\u53F7\u3002 \u8FD9\u4E2A\u503C\u53EF\u4EE5\u4F20\u9012\u7ED9clearTimeout()\u6765\u53D6\u6D88\u5B9A\u65F6\u5668\u3002</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>setTimeout()\u548CsetInterval()\u5171\u7528\u4E00\u4E2A\u7F16\u53F7\u6C60, \u6280\u672F\u4E0A,clearTimeout()\u548CclearInterval()\u53EF\u4EE5\u4E92\u6362, \u4F46\u662F\u4E3A\u4E86\u907F\u514D\u6DF7\u6DC6, \u4E0D\u8981\u6DF7\u7528\u53D6\u6D88\u5B9A\u65F6\u51FD\u6570\u3002</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;">// \u76D1\u542C\u7A97\u53E3\u662F\u5426\u53EF\u89C1</span></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;focus&#39;</span><span style="color:#F8F8F2;">, () </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;focus, I am seen now&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;blur&#39;</span><span style="color:#F8F8F2;">, () </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;blur, I am hidden&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// -------- visibilitychange ----------</span></span>
<span class="line"><span style="color:#88846F;">// \u5F53\u5176\u9009\u9879\u5361\u7684\u5185\u5BB9\u53D8\u5F97\u53EF\u89C1\u6216\u88AB\u9690\u85CF\u65F6\uFF0C\u4F1A\u5728\u6587\u6863\u4E0A\u89E6\u53D1 visibilitychange (\u80FD\u89C1\u5EA6\u66F4\u6539) \u4E8B\u4EF6\u3002</span></span>
<span class="line"><span style="color:#F8F8F2;">document.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;visibilitychange&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">event</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(document.visibilityState) </span><span style="color:#88846F;">// hidden / visible</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">document.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;visibilitychange&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> (document.visibilityState </span><span style="color:#F92672;">===</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;visible&#39;</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    backgroundMusic.</span><span style="color:#A6E22E;">play</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  } </span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    backgroundMusic.</span><span style="color:#A6E22E;">pause</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="window-devicepixelratio" tabindex="-1"><a class="header-anchor" href="#window-devicepixelratio" aria-hidden="true">#</a> window.devicePixelRatio</h2><p>window\u63A5\u53E3\u7684devicePixelRatio\u8FD4\u56DE\u5F53\u524D\u8BBE\u5907\u7684\u7269\u7406\u5206\u8FA8\u7387\u548CCSS\u50CF\u7D20\u5206\u8FA8\u7387\u4E4B\u6BD4\u3002</p><p>\u5A92\u4F53\u67E5\u8BE2\u4EE5(resolution: 1dppx) \u6216\u8005(resolution:2dppx) \u8BBE\u7F6E\u4E0D\u540C\u5206\u8FA8\u7387\u4E0B\u7684\u6837\u5F0F\u3002</p><div class="language-css ext-css line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F92672;">@media</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">screen</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">and</span><span style="color:#F8F8F2;"> (</span><span style="color:#66D9EF;font-style:italic;">min-resolution</span><span style="color:#F8F8F2;">:</span><span style="color:#AE81FF;">2</span><span style="color:#F92672;">dppx</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">.border-bottom-1px</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">content</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">&#39;&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">position</span><span style="color:#F8F8F2;">: </span><span style="color:#66D9EF;">absolute</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">left</span><span style="color:#F8F8F2;">: </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">bottom</span><span style="color:#F8F8F2;">: </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">transform</span><span style="color:#F8F8F2;">: </span><span style="color:#66D9EF;">scale</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">.5</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="window-open" tabindex="-1"><a class="header-anchor" href="#window-open" aria-hidden="true">#</a> window.open</h2><p>window.open() \u65B9\u6CD5\u7528\u4E8E\u6253\u5F00\u4E00\u4E2A\u65B0\u7684\u6D4F\u89C8\u5668\u7A97\u53E3\u6216\u8005\u67E5\u627E\u4E00\u4E2A\u5DF2\u7ECF\u547D\u540D\u7684\u7A97\u53E3\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, () </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> opener </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> window.</span><span style="color:#A6E22E;">open</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(opener)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;">setTimeout</span><span style="color:#F8F8F2;">(() </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    opener.</span><span style="color:#A6E22E;">close</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#F8F8F2;">  }, </span><span style="color:#AE81FF;">1000</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>opener\u8868\u793A\u5BF9\u901A\u8FC7window.open()\u653E\u5927\u6253\u5F00\u7A97\u53E3\u7684\u5F15\u7528, \u53EF\u4EE5\u901A\u8FC7\u8C03\u7528close()\u65B9\u6CD5\u5173\u95ED\u7A97\u53E3\u3002</p><h2 id="window-postmessage" tabindex="-1"><a class="header-anchor" href="#window-postmessage" aria-hidden="true">#</a> window.postMessage</h2><p>window.postMessage() \u65B9\u6CD5\u53EF\u4EE5\u5B89\u5168\u5730\u5B9E\u73B0\u8DE8\u6E90\u901A\u4FE1\u3002\u8BE5\u65B9\u6CD5\u63D0\u4F9B\u4E86\u4E00\u79CD\u53D7\u63A7\u673A\u5236\u6765\u89C4\u907F\u540C\u6E90\u9650\u5236\u3002 \u4E00\u4E2A\u7A97\u53E3\u53EF\u4EE5\u83B7\u5F97\u53E6\u4E00\u4E2A\u7A97\u53E3\u7684\u5F15\u7528\u3002\u7136\u540E\u5728\u7A97\u53E3\u4E0A\u8C03\u7528targetWindow.postMessage() \u65B9\u6CD5\u5206\u53D1\u4E00\u4E2AMessageEvent\u6D88\u606F\u3002 \u63A5\u53D7\u6D88\u606F\u7684\u7A97\u53E3\u53EF\u4EE5\u6839\u636E\u9700\u8981\u81EA\u7531\u5904\u7406\u6B64\u4E8B\u4EF6\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">postMessage</span><span style="color:#F8F8F2;">(message, targetOrigin, [transfer])</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, () </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> iframe </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;.iframe&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  iframe.contentWindow.</span><span style="color:#A6E22E;">postMessage</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;hello world&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// iframe</span></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">event</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(event.data) </span><span style="color:#88846F;">// \u4ECE\u7236\u7A97\u53E3\u4F20\u9012\u8FC7\u6765\u7684\u6570\u636E,\u6570\u636E\u53EF\u4EE5\u662F\u5BF9\u8C61\u6216\u8005\u6570\u7EC4</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="storage" tabindex="-1"><a class="header-anchor" href="#storage" aria-hidden="true">#</a> Storage</h2><ol><li>window.localStorage</li><li>window.sessionStorage</li></ol><p>window.localStorage\u548Cwindow.sessionStorage\u63D0\u4F9B\u4E86\u8BBF\u95EE\u7279\u5B9A\u57DF\u540D\u4E0B\u4F1A\u8BDD\u5B58\u50A8\u6216\u8005\u672C\u5730\u5B58\u50A8\u7684\u529F\u80FD\u3002 \u4E24\u79CD\u65B9\u5F0F\u64CD\u4F5C\u672C\u5730\u6570\u636E\u7684API\u76F8\u540C,\u4F46\u662Fwindow.localStorage\u5B58\u50A8\u7684\u6570\u636E\u6CA1\u6709\u65F6\u95F4\u9650\u5236\u3002\u9664\u975E\u624B\u52A8\u5220\u9664, \u4F46\u662FsessionStorage \u5B58\u50A8\u7684\u6570\u636E\u5728\u7A97\u53E3\u5173\u95ED\u540E\u4F1A\u6E05\u9664(\u5237\u65B0\u65F6\u4E0D\u4F1A)\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;">// Storage.setItem()</span></span>
<span class="line"><span style="color:#F8F8F2;">window.localStorage.</span><span style="color:#A6E22E;">setItem</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;key&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&#39;hello&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">window.localStorage.</span><span style="color:#A6E22E;">setItem</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;key&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;">JSON</span><span style="color:#F8F8F2;">.</span><span style="color:#66D9EF;">stringify</span><span style="color:#F8F8F2;">([{firstName:</span><span style="color:#E6DB74;">&#39;kyrie&#39;</span><span style="color:#F8F8F2;">, lastName:</span><span style="color:#E6DB74;">&#39;irving&#39;</span><span style="color:#F8F8F2;">}]))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// Storage.getItem()</span></span>
<span class="line"><span style="color:#F8F8F2;">window.localStorage.</span><span style="color:#A6E22E;">getItem</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;key&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// Storage.removeItem()</span></span>
<span class="line"><span style="color:#F8F8F2;">window.localStorage.</span><span style="color:#A6E22E;">removeItem</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;key&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// Storage.clear()</span></span>
<span class="line"><span style="color:#F8F8F2;">window.localStorage.</span><span style="color:#A6E22E;">clear</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>storage event \u5F53\u5B58\u50A8\u533A\u57DF(localStorage\u6216\u8005sessionStorage)\u88AB\u4FEE\u6539\u65F6, \u5C06\u89E6\u53D1storage\u4E8B\u4EF6\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;storage&#39;</span><span style="color:#F8F8F2;">, (</span><span style="color:#FD971F;font-style:italic;">event</span><span style="color:#F8F8F2;">) </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;">JSON</span><span style="color:#F8F8F2;">.</span><span style="color:#66D9EF;">parse</span><span style="color:#F8F8F2;">(event.oldValue))</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;">JSON</span><span style="color:#F8F8F2;">.</span><span style="color:#66D9EF;">parse</span><span style="color:#F8F8F2;">(event.newValue))</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(event.key)  </span><span style="color:#88846F;">// \u952E\u66F4\u6539\u65F6</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(event.type) </span><span style="color:#88846F;">// storage</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(event.storageArea)</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="&#39;https://developer.mozilla.org/zh-CN/docs/Web/API/Window/localStorage&#39;">MDN-localStorage</a></p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;">// \u4E00\u4E2A\u6A21\u62DFlocalStorage \u53EF\u4EE5\u8BBE\u7F6E\u8FC7\u671F\u4E8B\u4EF6\u7684\u53D8\u901A\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> save_button </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;.save-button&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> get_button </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;.get-button&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// value \u662F\u4E00\u4E2A\u5BF9\u8C61, \u8981\u5B58\u50A8\u7684\u952E\u503C\u5BF9\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">save</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">key</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">value</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">expire</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">typeof</span><span style="color:#F8F8F2;"> value </span><span style="color:#F92672;">===</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">null</span><span style="color:#F8F8F2;">) </span><span style="color:#F92672;">return</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">Object</span><span style="color:#F8F8F2;">.prototype.toString.</span><span style="color:#A6E22E;">call</span><span style="color:#F8F8F2;">(value) </span><span style="color:#F92672;">===</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;[object Object]&#39;</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> last_value </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">JSON</span><span style="color:#F8F8F2;">.</span><span style="color:#66D9EF;">parse</span><span style="color:#F8F8F2;">(window.localStorage.</span><span style="color:#A6E22E;">getItem</span><span style="color:#F8F8F2;">(key) </span><span style="color:#F92672;">||</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;{}&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    window.localStorage.</span><span style="color:#A6E22E;">setItem</span><span style="color:#F8F8F2;">(key, </span><span style="color:#66D9EF;">JSON</span><span style="color:#F8F8F2;">.</span><span style="color:#66D9EF;">stringify</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">...</span><span style="color:#F8F8F2;">last_value,</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">...</span><span style="color:#F8F8F2;">value,</span></span>
<span class="line"><span style="color:#F8F8F2;">      expire: expire </span><span style="color:#F92672;">?</span><span style="color:#F8F8F2;"> (</span><span style="color:#66D9EF;font-style:italic;">Date</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">now</span><span style="color:#F8F8F2;">() </span><span style="color:#F92672;">+</span><span style="color:#F8F8F2;"> expire) </span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">0</span></span>
<span class="line"><span style="color:#F8F8F2;">    }))</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">key</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> value </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">JSON</span><span style="color:#F8F8F2;">.</span><span style="color:#66D9EF;">parse</span><span style="color:#F8F8F2;">(window.localStorage.</span><span style="color:#A6E22E;">getItem</span><span style="color:#F8F8F2;">(key) </span><span style="color:#F92672;">||</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;{}&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> (value.expire) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> current </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">Date</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">now</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> (current </span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;"> value.expire) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#88846F;">// \u8FC7\u671F\u65F6\u5220\u9664\u5B58\u50A8\u7684\u503C</span></span>
<span class="line"><span style="color:#F8F8F2;">      window.localStorage.</span><span style="color:#A6E22E;">removeItem</span><span style="color:#F8F8F2;">(key)</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">null</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> { expire, </span><span style="color:#F92672;">...</span><span style="color:#F8F8F2;">data } </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> value</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> data</span></span>
<span class="line"><span style="color:#F8F8F2;">  } </span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> value</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#F8F8F2;">save_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, () </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">save</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;__player__&#39;</span><span style="color:#F8F8F2;">, {</span></span>
<span class="line"><span style="color:#F8F8F2;">    firstName: </span><span style="color:#E6DB74;">&#39;kyrie&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    lastName: </span><span style="color:#E6DB74;">&#39;irving&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    age: </span><span style="color:#AE81FF;">30</span></span>
<span class="line"><span style="color:#F8F8F2;">  }, </span><span style="color:#AE81FF;">10000</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">get_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, () </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> player </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;__player__&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(player)</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="&#39;https://www.npmjs.com/package/web-storage-cache&#39;">web-storage-cache</a></p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;">// \u672C\u5730\u5B58\u50A8\u52A0\u5BC6, \u5206\u522B\u4F7F\u7528URIComponent\u548Cbase64\u52A0\u5BC6\uFF0C \u5BF9\u79F0\u52A0\u5BC6</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> encrypt_button </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;.encrypt-button&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> decrypt_button </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;.decrypt-button&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">encrypt_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, () </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> player </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    firstName: </span><span style="color:#E6DB74;">&#39;kyrie&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    lastName: </span><span style="color:#E6DB74;">&#39;irving&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    age: </span><span style="color:#AE81FF;">30</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  window.localStorage.</span><span style="color:#A6E22E;">setItem</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;encode_player&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;">encodeURIComponent</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;">JSON</span><span style="color:#F8F8F2;">.</span><span style="color:#66D9EF;">stringify</span><span style="color:#F8F8F2;">(player)))</span></span>
<span class="line"><span style="color:#F8F8F2;">  window.localStorage.</span><span style="color:#A6E22E;">setItem</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;base_player&#39;</span><span style="color:#F8F8F2;">, window.</span><span style="color:#A6E22E;">btoa</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;">JSON</span><span style="color:#F8F8F2;">.</span><span style="color:#66D9EF;">stringify</span><span style="color:#F8F8F2;">(player)))</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">decrypt_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, () </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">try</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> string_1 </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> window.localStorage.</span><span style="color:#A6E22E;">getItem</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;encode_player&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(string_1) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> player </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">JSON</span><span style="color:#F8F8F2;">.</span><span style="color:#66D9EF;">parse</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;">decodeURIComponent</span><span style="color:#F8F8F2;">(string_1))</span></span>
<span class="line"><span style="color:#F8F8F2;">      console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(player)</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> string_2 </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> window.localStorage.</span><span style="color:#A6E22E;">getItem</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;base_player&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(string_2) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> player </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">JSON</span><span style="color:#F8F8F2;">.</span><span style="color:#66D9EF;">parse</span><span style="color:#F8F8F2;">(window.</span><span style="color:#A6E22E;">atob</span><span style="color:#F8F8F2;">(string_2))</span></span>
<span class="line"><span style="color:#F8F8F2;">      console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(player)</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  } </span><span style="color:#F92672;">catch</span><span style="color:#F8F8F2;">(err) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(err)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">null</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="&#39;https://www.npmjs.com/package/secure-ls&#39;">secure-ls</a></p><p><a href="&#39;https://www.npmjs.com/package/crypto-js&#39;">crypto-js</a></p><p><a href="&#39;https://www.npmjs.com/package/localstorage-slim&#39;">localstorage-slim</a></p><h2 id="window-location" tabindex="-1"><a class="header-anchor" href="#window-location" aria-hidden="true">#</a> window.location</h2><p>window.location\u662F\u4E00\u4E2A\u53EA\u8BFB\u5C5E\u6027,\u8FD4\u56DE\u4E00\u4E2Alocation\u5BF9\u8C61,\u5176\u4E2D\u5305\u542B\u6709\u5173\u6587\u6863\u5F53\u524D\u4F4D\u7F6E\u7684\u4FE1\u606F\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">window.location.href </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;http://www.baidu.com&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">window.location.</span><span style="color:#A6E22E;">assign</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;http://www.baidu.com&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">window.location.</span><span style="color:#A6E22E;">reload</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">window.location.</span><span style="color:#A6E22E;">replace</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;http://www.baidu.com&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">window.location.search  </span><span style="color:#88846F;">// \u5730\u5740?\u540E\u7684\u90E8\u5206(\u8BBE\u7F6E\u6216\u8005\u83B7\u53D6)</span></span>
<span class="line"><span style="color:#F8F8F2;">window.location.hash    </span><span style="color:#88846F;">// #a (\u8BBE\u7F6E\u6216\u8005\u83B7\u53D6)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// window.hashchange</span></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;hashchange&#39;</span><span style="color:#F8F8F2;">, () </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;hash changed&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="window-navigator" tabindex="-1"><a class="header-anchor" href="#window-navigator" aria-hidden="true">#</a> window.navigator</h2><p>window.navigator\u4F1A\u8FD4\u56DE\u4E00\u4E2Anavigator\u5BF9\u8C61\u7684\u5F15\u7528\u3002\u53EF\u4EE5\u7528\u4E8E\u8BF7\u6C42\u8FD0\u884C\u5F53\u524D\u4EE3\u7801\u7684\u5E94\u7528\u7A0B\u5E8F\u7684\u76F8\u5173\u4FE1\u606F\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;">// \u68C0\u6D4B\u6D4F\u89C8\u5668</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">get_browser</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> browser_list </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> [</span><span style="color:#E6DB74;">&#39;Chrome&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&#39;Safari&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&#39;Edge&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&#39;Opera&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&#39;Firefox&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&#39;MicroMessenger&#39;</span><span style="color:#F8F8F2;">]</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> urgent </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> window.navigator.userAgent</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> b_index </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> browser_list.</span><span style="color:#A6E22E;">findIndex</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">b</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> urgent.</span><span style="color:#A6E22E;">includes</span><span style="color:#F8F8F2;">(b))</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">~</span><span style="color:#F8F8F2;">b_index) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> browser_list[b_index]</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;unknown&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> urgent </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">get_browser</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// \u4E00\u4E2A\u68C0\u6D4B\u6D4F\u89C8\u5668\u7684\u7B2C\u4E09\u65B9\u5E93 ua-parser-js</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(window.navigator.onLine)  </span><span style="color:#88846F;">//\u68C0\u6D4B\u662F\u5426\u6709\u7F51\u7EDC(true/false)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// navigator.clipboard </span></span>
<span class="line"><span style="color:#88846F;">/*</span></span>
<span class="line"><span style="color:#88846F;">Clipboard API Navigator\u63A5\u53E3\u6DFB\u52A0\u4E86\u53EA\u8BFB\u5C5E\u6027clipboard. \u53EF\u4EE5\u5B9E\u73B0\u526A\u8D34,\u590D\u5236,\u7C98\u8D34\u7684\u529F\u80FD</span></span>
<span class="line"><span style="color:#88846F;">*/</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> clipboard_button </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;.clipboard-button&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">clipboard_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">  window.navigator.clipboard.</span><span style="color:#A6E22E;">writeText</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;hello world, \u4F60\u597D\u751F\u6D3B&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// \u67E5\u770B\u590D\u5236\u7684\u5185\u5BB9</span></span>
<span class="line"><span style="color:#F8F8F2;">window.navigator.clipboard.</span><span style="color:#A6E22E;">readText</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">then</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">res</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(res)</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// \u76D1\u542Ccopy\u4E8B\u4EF6\u5E76\u8BBE\u7F6E\u8981\u590D\u5236\u5185\u5BB9</span></span>
<span class="line"><span style="color:#F8F8F2;">document.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;copy&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">e</span><span style="color:#F8F8F2;">){</span></span>
<span class="line"><span style="color:#F8F8F2;">  e.clipboardData.</span><span style="color:#A6E22E;">setData</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;text/plain&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&#39;Hello, world!&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  e.clipboardData.</span><span style="color:#A6E22E;">setData</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;text/html&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&#39;&lt;b&gt;Hello, world!&lt;/b&gt;&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  e.</span><span style="color:#A6E22E;">preventDefault</span><span style="color:#F8F8F2;">(); </span><span style="color:#88846F;">// We want our data, not data from any selection, to be written to the clipboard</span></span>
<span class="line"><span style="color:#F8F8F2;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="window-history" tabindex="-1"><a class="header-anchor" href="#window-history" aria-hidden="true">#</a> window.history</h2><p>window.history\u5BF9\u8C61\u5305\u542B\u6D4F\u89C8\u5668\u7684\u5386\u53F2</p><ol><li>window.history.back()</li><li>window.history.forward()</li><li>window.history.go()</li></ol><h3 id="history-pushstate-history-replacestate" tabindex="-1"><a class="header-anchor" href="#history-pushstate-history-replacestate" aria-hidden="true">#</a> history.pushState / history.replaceState</h3><p>history.pushState(state, title, url) \u65B9\u6CD5\u5411\u5F53\u524D\u6D4F\u89C8\u5668\u4F1A\u8BDD\u7684\u5386\u53F2\u5806\u6808\u4E2D\u6DFB\u52A0\u4E00\u4E2A\u72B6\u6001\u3002 history.replaceState(state, title, url) \u4FEE\u6539\u5F53\u524D\u5386\u53F2\u8BB0\u5F55\u5B9E\u4F53\u3002</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>state \u662F\u4E00\u4E2AJavaScript\u72B6\u6001\u5BF9\u8C61,\u5B83\u4E0EpushState()\u521B\u5EFA\u7684\u5386\u53F2\u8BB0\u5F55\u6761\u76EE\u76F8\u5173\u8054\u3002 title \u5F53\u524D\u5927\u591A\u6570\u6D4F\u89C8\u5668\u90FD\u5FFD\u7565\u6B64\u53C2\u6570. url \u65B0\u7684\u5386\u53F2\u6761\u76EE</p></div>`,52),u={href:"https://developer.mozilla.org/zh-CN/docs/Web/API/History/pushState",target:"_blank",rel:"noopener noreferrer"},m=i("MDN-history.pushState"),E=a(`<p>\u63CF\u8FF0: \u4ECE\u67D0\u79CD\u7A0B\u5EA6\u4E0A\u8BF4, \u8C03\u7528pushState() \u548C window.location = &#39;#foo&#39;\u57FA\u672C\u4E0A\u4E00\u6837, \u5B83\u4EEC\u90FD\u4F1A\u5728\u5F53\u524D\u90FDdocument\u4E2D\u521B\u5EFA\u548C\u6FC0\u6D3B\u4E00\u4E2A\u65B0\u7684\u5386\u53F2\u8BB0\u5F55\u3002 \u4F46\u662FpushState()\u6709\u4EE5\u4E0B\u4F18\u52BF:</p><ol><li>\u65B0\u7684url\u53EF\u4EE5\u662F\u4EFB\u4F55\u548C\u5F53\u524Durl\u540C\u6E90\u7684url,\u5F53\u8BBE\u7F6Ewindow.location\u53EA\u4F1A\u5728\u4F60\u53EA\u8BBE\u7F6E\u951A\u7684\u65F6\u5019\u624D\u4F1A\u4F7F\u7528\u5F53\u524Durl.</li><li>window.location = &#39;#foo&#39; \u4EC5\u4EC5\u4F1A\u5728\u951A\u7684\u503C\u4E0D\u662F #foo\u60C5\u51B5\u4E0B\u521B\u5EFA\u4E00\u6761\u65B0\u7684\u5386\u53F2\u8BB0\u5F55</li><li>\u53EF\u4EE5\u5728\u65B0\u7684\u5386\u53F2\u8BB0\u5F55\u4E2D\u5173\u8054\u4EFB\u4F55\u6570\u636E\u3002</li></ol><h3 id="popstate" tabindex="-1"><a class="header-anchor" href="#popstate" aria-hidden="true">#</a> popState</h3><p>\u5F53\u6D3B\u52A8\u5386\u53F2\u6761\u76EE\u66F4\u6539\u65F6,\u5C06\u4F1A\u89E6\u53D1popstate\u4E8B\u4EF6\u3002 \u5982\u679C\u88AB\u6FC0\u6D3B\u7684\u5386\u53F2\u6761\u76EE\u662F\u901A\u8FC7history.pushState()\u6216\u8005history.replaceState() \u7684\u8C03\u7528\u5F71\u54CD,popstate\u4E8B\u4EF6\u7684state\u5C5E\u6027\u5305\u542B\u5386\u53F2\u6761\u76EE\u7684\u72B6\u6001\u5BF9\u8C61\u7684\u526F\u672C\u3002</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>history.pushState() \u6216\u8005 history.replaceState() \u4E0D\u4F1A\u89E6\u53D1popstate\u4E8B\u4EF6\u3002 \u7528\u6237\u70B9\u51FB\u6D4F\u89C8\u5668\u7684\u56DE\u9000\u6309\u94AE,\u6216\u8005history.back() / history.forward() / history.go() \u624D\u4F1A\u89E6\u53D1\u3002</p></div><h2 id="queuemicrotask" tabindex="-1"><a class="header-anchor" href="#queuemicrotask" aria-hidden="true">#</a> queueMicrotask</h2><p>\u5FAE\u4EFB\u52A1(microtask)\u7684\u6267\u884C\u987A\u5E8F\u5728\u6240\u6709\u6302\u8D77\u7684\u4EFB\u52A1(pending tasks)\u5B8C\u6210\u4E4B\u540E,\u5728\u5BF9\u6D4F\u89C8\u5668\u7684\u4E8B\u4EF6\u5FAA\u73AF\u4EA7\u751F\u63A7\u5236\u4E4B\u524D\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;start&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Date</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">now</span><span style="color:#F8F8F2;">())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;">setTimeout</span><span style="color:#F8F8F2;">(() </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;setTimeout&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">queueMicrotask</span><span style="color:#F8F8F2;">(() </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;queueMicrotask&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">Promise</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">resolve</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">then</span><span style="color:#F8F8F2;">(() </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;promise&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"><span style="color:#F8F8F2;">console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;end&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">Date</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">now</span><span style="color:#F8F8F2;">())</span></span>
<span class="line"><span style="color:#88846F;">/*</span></span>
<span class="line"><span style="color:#88846F;">start 1658498438592</span></span>
<span class="line"><span style="color:#88846F;">end 1658498438592</span></span>
<span class="line"><span style="color:#88846F;">queueMicrotask</span></span>
<span class="line"><span style="color:#88846F;">promise</span></span>
<span class="line"><span style="color:#88846F;">*/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0B\u9762\u662FMDN\u4E0A\u7684\u4E00\u4E2AqueueMicrotask \u7684polyfill\u3002 \u4F7F\u7528\u7684\u662Fpromise\u521B\u5EFA\u4E00\u4E2A\u5FAE\u4EFB\u52A1</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">typeof</span><span style="color:#F8F8F2;"> window.queueMicrotask </span><span style="color:#F92672;">!==</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;function&#39;</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  window.</span><span style="color:#A6E22E;">queueMicrotask</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">callback</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#66D9EF;font-style:italic;">Promise</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">resolve</span><span style="color:#F8F8F2;">().</span><span style="color:#A6E22E;">then</span><span style="color:#F8F8F2;">(callback)</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10);function b(h,g){const e=s("JavaScript-ModalButton"),o=s("ClientOnly"),p=s("ExternalLinkIcon");return t(),F("div",null,[d,n(o,null,{default:r(()=>[n(e)]),_:1}),v,l("p",null,[l("a",u,[m,n(p)])]),E])}var D=c(y,[["render",b],["__file","bom.html.vue"]]);export{D as default};
