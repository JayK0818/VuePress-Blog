import{_ as i,o as r,c as y,a as n,w as p,b as s,d as l,e as o,r as a}from"./app.7b5becf5.js";const d={},v=l(`<h1 id="event" tabindex="-1"><a class="header-anchor" href="#event" aria-hidden="true">#</a> Event</h1><ol><li>\u4E8B\u4EF6\u7C7B\u578B(event type)</li><li>\u4E8B\u4EF6\u76EE\u6807(event target)</li><li>\u4E8B\u4EF6\u5BF9\u8C61(event object)</li><li>\u4E8B\u4EF6\u4F20\u64AD(event propagation) -&gt; \u4E8B\u4EF6\u5192\u6CE1\u548C\u4E8B\u4EF6\u6355\u83B7</li></ol><h2 id="window\u4E8B\u4EF6" tabindex="-1"><a class="header-anchor" href="#window\u4E8B\u4EF6" aria-hidden="true">#</a> window\u4E8B\u4EF6</h2><p>window.load() \u5F53\u6574\u4E2A\u9875\u9762\u53CA\u6240\u6709\u4F9D\u8D56\u8D44\u6E90 \u5982\u6837\u5F0F\u8868\u548C\u56FE\u7247\u90FD\u5DF2\u7ECF\u52A0\u8F7D\u5B8C\u6210\u65F6, \u5C06\u89E6\u53D1load\u4E8B\u4EF6\u3002</p><p>window.unload() unload()\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u53EF\u4EE5\u7528\u4E8E\u4FDD\u5B58\u7528\u6237\u7684\u72B6\u6001,\u4F46\u662F\u5B83\u4E0D\u80FD\u7528\u4E8E\u53D6\u6D88\u7528\u6237\u8F6C\u5411\u5176\u4ED6\u5730\u65B9</p><p>window.beforeunload() \u5F53\u6D4F\u89C8\u5668\u7A97\u53E3\u5173\u95ED\u6216\u8005\u5237\u65B0\u65F6,\u4F1A\u89E6\u53D1beforeunload\u4E8B\u4EF6\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;beforeunload&#39;</span><span style="color:#F8F8F2;">, (</span><span style="color:#FD971F;font-style:italic;">event</span><span style="color:#F8F8F2;">) </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// Cancel the event as stated by the standard.</span></span>
<span class="line"><span style="color:#F8F8F2;">  event.</span><span style="color:#A6E22E;">preventDefault</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// Chrome requires returnValue to be set.</span></span>
<span class="line"><span style="color:#F8F8F2;">  event.returnValue </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&#39;&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>\u5E76\u975E\u6240\u6709\u6D4F\u89C8\u5668\u90FD\u652F\u6301\u6B64\u65B9\u6CD5,\u6709\u4E9B\u6D4F\u89C8\u5668\u9700\u8981\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u5B9E\u73B0\u4E24\u4E2A\u9057\u7559\u65B9\u6CD5\u4E2D\u90FD\u4E00\u4E2A\u4F5C\u4E3A\u66FF\u4EE3:</p><ol><li>\u5C06\u5B57\u7B26\u4E32\u5206\u914D\u7ED9\u4E8B\u4EF6\u7684returnValue\u5C5E\u6027</li><li>\u4ECE\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u8FD4\u56DE\u4E00\u4E2A\u5B57\u7B26\u4E32</li></ol></div><h2 id="addeventlistener" tabindex="-1"><a class="header-anchor" href="#addeventlistener" aria-hidden="true">#</a> addEventListener()</h2><p>EventTarget.addEventListener() \u5C06\u6307\u5B9A\u7684\u76D1\u542C\u5668\u6CE8\u518C\u5230EventTarget\u4E0A,\u5F53\u8BE5\u5BF9\u8C61\u89E6\u53D1\u6307\u5B9A\u7684\u4E8B\u4EF6\u65F6,\u6307\u5B9A\u7684\u56DE\u8C03\u51FD\u6570\u5C31\u4F1A\u88AB\u6267\u884C\u3002</p><ol><li>\u5B83\u5141\u8BB8\u7ED9\u4E00\u4E2A\u4E8B\u4EF6\u6CE8\u518C\u591A\u4E2A\u76D1\u542C\u5668\u3002</li><li>\u5B83\u63D0\u4F9B\u4E86\u4E00\u79CD\u66F4\u7CBE\u7EC6\u7684\u624B\u6BB5\u63A7\u5236listener\u7684\u89E6\u53D1\u9636\u6BB5\u3002</li><li>\u5B83\u5BF9\u4EFB\u4F55DOM\u5143\u7D20\u90FD\u662F\u6709\u6548\u7684\u3002</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">target.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(type, listener, options);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// options(\u53EF\u9009)</span></span>
<span class="line"><span style="color:#F8F8F2;">{</span></span>
<span class="line"><span style="color:#F8F8F2;">  capture: </span><span style="color:#66D9EF;font-style:italic;">Boolean</span><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// false\u5192\u6CE1\u9636\u6BB5, true \u6355\u83B7\u9636\u6BB5</span></span>
<span class="line"><span style="color:#F8F8F2;">  once: </span><span style="color:#66D9EF;font-style:italic;">Boolean</span><span style="color:#F8F8F2;">     </span><span style="color:#88846F;">// \u5982\u679C\u8BBE\u7F6E\u4E3Atrue,listener\u4F1A\u5728\u5176\u88AB\u8C03\u7528\u4E4B\u540E\u81EA\u52A8\u79FB\u9664</span></span>
<span class="line"><span style="color:#F8F8F2;">  passive: </span><span style="color:#66D9EF;font-style:italic;">Boolean</span><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// \u8BBE\u7F6E\u4E3Atrue, \u8868\u793Alistener\u6C38\u8FDC\u4E0D\u4F1A\u8C03\u7528preventDefault()</span></span>
<span class="line"><span style="color:#F8F8F2;">  signal: AbortSignal </span><span style="color:#88846F;">// \u8BE5AbortSignal\u7684abort()\u65B9\u6CD5\u88AB\u8C03\u7528\u65F6,\u76D1\u542C\u5668\u4F1A\u88AB\u79FB\u9664\u3002</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;">// \u68C0\u6D4B\u662F\u5426\u652F\u6301passive</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">var</span><span style="color:#F8F8F2;"> passiveSupported </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">try</span><span style="color:#F8F8F2;">{</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">var</span><span style="color:#F8F8F2;"> options </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;font-style:italic;">Object</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">defineProperty</span><span style="color:#F8F8F2;">({}, </span><span style="color:#E6DB74;">&#39;passive&#39;</span><span style="color:#F8F8F2;">, {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#A6E22E;">get</span><span style="color:#F8F8F2;">:</span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">      passiveSupported </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">true</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  })</span></span>
<span class="line"><span style="color:#F8F8F2;">  window.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;test&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#AE81FF;">null</span><span style="color:#F8F8F2;">, options)</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span><span style="color:#F92672;">catch</span><span style="color:#F8F8F2;">(err) {</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">class</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;text-decoration:underline;">DomEvent</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#66D9EF;font-style:italic;">constructor</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">element</span><span style="color:#F8F8F2;">){</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.element </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> element</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">addEvent</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">type</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">handler</span><span style="color:#F8F8F2;">){</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.element.addEventListener){</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.element.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(type, handler, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.element.attachEvent){</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.element.</span><span style="color:#A6E22E;">attachEvent</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;on&#39;</span><span style="color:#F92672;">+</span><span style="color:#F8F8F2;">type, handler)</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;">{</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.element[</span><span style="color:#E6DB74;">&#39;on&#39;</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">+</span><span style="color:#F8F8F2;"> type] </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> handler</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">removeEvent</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">type</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">handler</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.element.removeEventListener){</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.element.</span><span style="color:#A6E22E;">removeEventListener</span><span style="color:#F8F8F2;">(type, handler, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.element.detachEvent){</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.element.</span><span style="color:#A6E22E;">detachEvent</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;on&#39;</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">+</span><span style="color:#F8F8F2;"> type)</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;">{</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.element[</span><span style="color:#E6DB74;">&#39;on&#39;</span><span style="color:#F92672;">+</span><span style="color:#F8F8F2;">type] </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">null</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">stopPropagation</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">event</span><span style="color:#F8F8F2;">){</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(event.</span><span style="color:#A6E22E;">stopPropagation</span><span style="color:#F8F8F2;">()){</span></span>
<span class="line"><span style="color:#F8F8F2;">    event.</span><span style="color:#A6E22E;">stopPropagation</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span><span style="color:#F92672;">else</span><span style="color:#F8F8F2;">{</span></span>
<span class="line"><span style="color:#F8F8F2;">    event.cancelBubble </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">true</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">preventDefault</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">event</span><span style="color:#F8F8F2;">){</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(event.</span><span style="color:#A6E22E;">preventDefault</span><span style="color:#F8F8F2;">()) event.</span><span style="color:#A6E22E;">preventDefault</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">if</span><span style="color:#F8F8F2;">(event.returnValue) event.returnValue </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">false</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#AE81FF;">false</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// IE9 \u53CA \u4E4B\u524D\u7684IE\u4E0D\u652F\u6301addEventListener()\u548CremoveEventListener(), </span></span>
<span class="line"><span style="color:#88846F;">// IE5\u4E4B\u540E\u5B9A\u4E49\u4E86\u7C7B\u4F3C\u7684  attachEvent()\u548C detachEvent()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>stopPropagation()\u53EF\u4EE5\u5728\u4E8B\u4EF6\u4F20\u64AD\u671F\u95F4\u7684\u4EFB\u4F55\u65F6\u95F4\u8C03\u7528,\u5B83\u80FD\u5DE5\u4F5C\u5728\u6355\u83B7\u9636\u6BB5,\u4E8B\u4EF6\u76EE\u6807\u672C\u8EAB\u4E2D\u548C\u5192\u6CE1\u9636\u6BB5</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;">// \u5982\u679CaddEventListener() \u6CE8\u518C\u4E8B\u4EF6\u7684\u53C2\u6570\u90FD\u76F8\u540C,\u90A3\u4E48\u53EA\u4F1A\u6267\u884C\u4E00\u6B21</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">listen_click</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> click_button </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;.click_button&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">click_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, listen_click, </span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">click_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, listen_click, </span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#88846F;">// \u70B9\u51FBbutton\u65F6\u53EA\u4F1A\u6267\u884C\u4E00\u6B21, listen_click\u53EA\u4F1A\u6267\u884C\u4E00\u6B21,\u91CD\u590D\u7684\u90FD\u88AB\u81EA\u52A8\u629B\u5F03\u4E86\u3002</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// \u8FD9\u6837\u6CE8\u518C\u65F6\u4F1A\u6267\u884C\u4E24\u6B21,\u56E0\u4E3A\u51FD\u6570\u53E5\u67C4\u4E0D\u76F8\u540C</span></span>
<span class="line"><span style="color:#F8F8F2;">click_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">click_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;">&lt;!-- This \u95EE\u9898 --&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">onclick</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&#39;</span><span style="color:#F8F8F2;">click1</span><span style="color:#E6DB74;">&#39;</span><span style="color:#F8F8F2;">&gt;click-1&lt;/</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">onclick</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&#39;</span><span style="color:#F8F8F2;">click2</span><span style="color:#E6DB74;">&#39;</span><span style="color:#F8F8F2;">&gt;click-2&lt;/</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">script</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">click1</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click-1&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">)  </span><span style="color:#88846F;">// window</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">click2</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">t</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click-2&#39;</span><span style="color:#F8F8F2;">, t);  </span><span style="color:#88846F;">// button\u5143\u7D20</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">script</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="removeeventlistener" tabindex="-1"><a class="header-anchor" href="#removeeventlistener" aria-hidden="true">#</a> removeEventListener()</h2><p>\u5220\u9664\u4F7F\u7528EventTarget.addEventListener()\u65B9\u6CD5\u6DFB\u52A0\u7684\u4E8B\u4EF6\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">target.</span><span style="color:#A6E22E;">removeEventListener</span><span style="color:#F8F8F2;">(type, listener[, options]);</span></span>
<span class="line"><span style="color:#F8F8F2;">target.</span><span style="color:#A6E22E;">removeEventListener</span><span style="color:#F8F8F2;">(type, listener[, useCapture]);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u7684\u53C2\u6570</p><p>\u5728IE8\u53CA\u4E4B\u524D\u7684\u7248\u672C\u4E2D, \u8C03\u7528\u4E8B\u4EF6\u5904\u7406\u51FD\u6570\u65F6\u5E76\u672A\u4F20\u9012\u4E8B\u4EF6\u5BF9\u8C61\u4F5C\u4E3A\u7B2C\u4E00\u4E2A\u53C2\u6570,\u6B64\u65F6\u9700\u8981\u901A\u8FC7\u5168\u5C40\u5BF9\u8C61window.event\u6765\u83B7\u5F97\u4E8B\u4EF6\u5BF9\u8C61\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">handler</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">event</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  event </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> event </span><span style="color:#F92672;">||</span><span style="color:#F8F8F2;"> window.event</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E8B\u4EF6\u4F20\u64AD" tabindex="-1"><a class="header-anchor" href="#\u4E8B\u4EF6\u4F20\u64AD" aria-hidden="true">#</a> \u4E8B\u4EF6\u4F20\u64AD</h2><p>\u4E8B\u4EF6\u6355\u83B7 -&gt; \u76EE\u6807\u5BF9\u8C61 -&gt; \u4E8B\u4EF6\u5192\u6CE1</p><p>\u4E8B\u4EF6\u6355\u83B7\u63D0\u4F9B\u4E86\u5728\u4E8B\u4EF6\u8FD8\u6CA1\u6709\u53D1\u9001\u5230\u76EE\u6807\u4E4B\u524D\u67E5\u770B\u5B83\u4EEC\u7684\u673A\u4F1A,\u4E8B\u4EF6\u6355\u83B7\u80FD\u7528\u4E8E\u7A0B\u5E8F\u8C03\u8BD5,\u6216\u8005\u7528\u4E8E\u4E8B\u4EF6\u53D6\u6D88\u6280\u672F, \u8FC7\u6EE4\u6389\u4E8B\u4EF6\u4ECE\u800C\u4F7F\u76EE\u6807\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u7EDD\u5BF9\u4E0D\u4F1A\u88AB\u8C03\u7528\u3002</p><p>\u53EF\u70B9\u51FB\u4E0B\u65B9\u5E26\u989C\u8272\u7684\u76D2\u5B50,\u4ECE\u5927\u5230\u5C0F \u4F9D\u6B21\u4E3A box1 box2 box3.</p>`,27),u=s("h2",{id:"event-target",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#event-target","aria-hidden":"true"},"#"),o(" Event.target")],-1),E=s("p",null,"\u89E6\u53D1\u4E8B\u4EF6\u7684\u5BF9\u8C61(\u67D0\u4E2ADOM\u5143\u7D20\u7684)\u5F15\u7528\u3002 \u4F7F\u7528\u8BE5\u5C5E\u6027\u53EF\u4EE5\u7528\u6765\u5B9E\u73B0\u4E8B\u4EF6\u59D4\u6258\u3002",-1),m=s("p",null,[s("strong",null,"\u53EF\u70B9\u51FB\u4E0B\u65B9\u7403\u5458\u5217\u8868,\u4F1A\u5F39\u51FA\u5F53\u524D\u7403\u5458\u59D3\u540D\u548Cli\u5143\u7D20\u7D22\u5F15\u3002")],-1),b=l(`<h2 id="event-currenttarget" tabindex="-1"><a class="header-anchor" href="#event-currenttarget" aria-hidden="true">#</a> Event.currentTarget</h2><p>event.currentTarget\u603B\u662F\u6307\u5411\u4E8B\u4EF6\u7ED1\u5B9A\u7684\u5143\u7D20\u3002</p><h2 id="event-stoppropagation" tabindex="-1"><a class="header-anchor" href="#event-stoppropagation" aria-hidden="true">#</a> Event.stopPropagation</h2><p>\u963B\u6B62\u6355\u83B7\u548C\u5192\u6CE1\u9636\u6BB5\u4E2D\u5F53\u524D\u4E8B\u4EF6\u7684\u8FDB\u4E00\u6B65\u4F20\u64AD, \u4F46\u662F\u5B83\u4E0D\u80FD\u963B\u6B62\u4EFB\u4F55\u9ED8\u8BA4\u884C\u4E3A\u7684\u53D1\u751F,\u4F8B\u5982\u5BF9\u8FDE\u63A5\u7684\u70B9\u51FB\u4ECD\u4F1A\u88AB\u5904\u7406\u3002</p><h2 id="event-type" tabindex="-1"><a class="header-anchor" href="#event-type" aria-hidden="true">#</a> Event.type</h2><p>\u53EA\u8BFB\u5C5E\u6027Event.type\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u5B57\u7B26\u4E32,\u8868\u793A\u8BE5\u4E8B\u4EF6\u5BF9\u8C61\u7684\u4E8B\u4EF6\u7C7B\u578B\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">getEventType</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">event</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(event.type)</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">document.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;keypress&#39;</span><span style="color:#F8F8F2;">, getEventType, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">document.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;keydown&#39;</span><span style="color:#F8F8F2;">, getEventType, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">document.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, getEventType, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">onclick</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&#39;</span><span style="color:#A6E22E;">click1</span><span style="color:#E6DB74;">()&#39;</span><span style="color:#F8F8F2;">&gt;click-1&lt;/</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">onclick</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&#39;</span><span style="color:#A6E22E;">click2</span><span style="color:#E6DB74;">(</span><span style="color:#FD971F;">this</span><span style="color:#E6DB74;">)&#39;</span><span style="color:#F8F8F2;">&gt;click-2&lt;/</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">onclick</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&#39;</span><span style="color:#F8F8F2;">console</span><span style="color:#E6DB74;">.</span><span style="color:#A6E22E;">log</span><span style="color:#E6DB74;">(&quot;Hello World&quot;)&#39;</span><span style="color:#F8F8F2;">&gt;click-3&lt;/</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">script</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// click1 \u548C click2\u4F1A\u5728\u5168\u5C40\u4F5C\u7528\u57DF\u4E0B\u67E5\u627E\u3002</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">var</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">click1</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> () </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click-1&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">var</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">click2</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> (</span><span style="color:#F92672;">...</span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F8F8F2;">) </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> { </span><span style="color:#88846F;">// this\u6307\u5411button\u81EA\u8EAB</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(args)</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">script</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="event-preventdefault" tabindex="-1"><a class="header-anchor" href="#event-preventdefault" aria-hidden="true">#</a> Event.preventDefault</h2><p>\u7528\u6765\u963B\u6B62\u6D4F\u89C8\u5668\u7684\u9ED8\u8BA4\u884C\u4E3A, \u6B64\u4E8B\u4EF6\u8FD8\u662F\u4F1A\u7EE7\u7EED\u4F20\u64AD\u3002 \u6BD4\u5982\u7981\u6B62a\u6807\u7B7E\u8DF3\u8F6C, checkbox\u9009\u4E2D \u6216\u8005\u8868\u5355\u63D0\u4EA4\u7B49\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">document.</span><span style="color:#A6E22E;">getElementById</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;checkbox&#39;</span><span style="color:#F8F8F2;">).</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">event</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  event.</span><span style="color:#A6E22E;">preventDefault</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;.link&#39;</span><span style="color:#F8F8F2;">).</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">event</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  event.</span><span style="color:#A6E22E;">preventDefault</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="event-stopimmediatepropagation" tabindex="-1"><a class="header-anchor" href="#event-stopimmediatepropagation" aria-hidden="true">#</a> Event.stopImmediatePropagation</h2><p>Event.stopImmediatePropagation() \u963B\u6B62\u76D1\u542C\u540C\u4E00\u4E8B\u4EF6\u7684\u5176\u4ED6\u4E8B\u4EF6\u76D1\u542C\u5668\u88AB\u8C03\u7528\u3002\u5982\u679C\u5728\u5176\u4E2D\u4E00\u4E2A\u4E8B\u4EF6\u76D1\u542C\u5668\u4E2D\u6267\u884C stopImmediatePropagation() \uFF0C\u90A3\u4E48\u5269\u4E0B\u7684\u4E8B\u4EF6\u76D1\u542C\u5668\u90FD\u4E0D\u4F1A\u88AB\u8C03\u7528\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">immediate_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;hello 1&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"><span style="color:#F8F8F2;">immediate_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">event</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;hello 2&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// event.stopImmediatePropagation() // \u4E0D\u4EC5\u963B\u6B62\u4E8B\u4EF6\u5192\u6CE1, \u540E\u9762\u6CE8\u518C\u7684\u76F8\u540C\u7C7B\u578B\u4E8B\u4EF6\u5168\u90E8\u4E0D\u6267\u884C</span></span>
<span class="line"><span style="color:#F8F8F2;">  event.</span><span style="color:#A6E22E;">stopPropagation</span><span style="color:#F8F8F2;">() </span><span style="color:#88846F;">// \u4EC5\u963B\u6B62\u4E8B\u4EF6\u5192\u6CE1,button\u6CE8\u518C\u7684\u5176\u4ED6click\u4E8B\u4EF6\u4F1A\u88AB\u6267\u884C</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"><span style="color:#F8F8F2;">immediate_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;hello 3&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"><span style="color:#F8F8F2;">immediate_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;hello 4&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="customevent" tabindex="-1"><a class="header-anchor" href="#customevent" aria-hidden="true">#</a> CustomEvent</h2><p>\u4F7F\u7528CustomEvent \u53EF\u4EE5\u521B\u5EFA\u81EA\u5B9A\u4E49\u4E8B\u4EF6\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> event </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">CustomEvent</span><span style="color:#F8F8F2;">(type, {</span></span>
<span class="line"><span style="color:#F8F8F2;">  detail: </span><span style="color:#AE81FF;">null</span><span style="color:#F8F8F2;">,  </span><span style="color:#88846F;">// default null</span></span>
<span class="line"><span style="color:#F8F8F2;">  bubbles: </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">, </span><span style="color:#88846F;">//\u8868\u793A\u4E8B\u4EF6\u662F\u5426\u5192\u6CE1</span></span>
<span class="line"><span style="color:#F8F8F2;">  cancelable: </span><span style="color:#AE81FF;">true</span><span style="color:#F8F8F2;">  </span><span style="color:#88846F;">// \u8868\u793A\u4E8B\u4EF6\u662F\u5426\u53EF\u4EE5\u53D6\u6D88</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;">// \u4E00\u4E2A\u6848\u4F8B</span></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;cat&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(e.detail) </span><span style="color:#88846F;">//  {message: &#39;hello world&#39;}</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> custom_event </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">CustomEvent</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;cat&#39;</span><span style="color:#F8F8F2;">, {</span></span>
<span class="line"><span style="color:#F8F8F2;">  detail: {</span></span>
<span class="line"><span style="color:#F8F8F2;">    message: </span><span style="color:#E6DB74;">&#39;hello world&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> custom_button </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;.custom-button&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">custom_button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">  window.</span><span style="color:#A6E22E;">dispatchEvent</span><span style="color:#F8F8F2;">(custom_event)</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F" aria-hidden="true">#</a> \u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F</h2><p>\u5229\u7528window.addEventListener() / window.removeEventListener() \u5B9E\u73B0\u4E00\u4E2A\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">window._on </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> window.addEventListener</span></span>
<span class="line"><span style="color:#F8F8F2;">window._off </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> window.removeEventListener</span></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">_once</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> (</span><span style="color:#FD971F;font-style:italic;">type</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">listener</span><span style="color:#F8F8F2;">) </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> window.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(type, listener, {</span></span>
<span class="line"><span style="color:#F8F8F2;">  once: </span><span style="color:#AE81FF;">true</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">_emit</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> (</span><span style="color:#FD971F;font-style:italic;">type</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">detail</span><span style="color:#F8F8F2;">) </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> window.</span><span style="color:#A6E22E;">dispatchEvent</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">CustomEvent</span><span style="color:#F8F8F2;">(type, {</span></span>
<span class="line"><span style="color:#F8F8F2;">  detail</span></span>
<span class="line"><span style="color:#F8F8F2;">}))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">listen_custom_event</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> (</span><span style="color:#FD971F;font-style:italic;">event</span><span style="color:#F8F8F2;">) </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(event.detail)</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">_on</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;custom-event&#39;</span><span style="color:#F8F8F2;">, listen_custom_event)</span></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">_emit</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;custom-event&#39;</span><span style="color:#F8F8F2;">, { message: </span><span style="color:#E6DB74;">&#39;\u4F60\u597D\u751F\u6D3B&#39;</span><span style="color:#F8F8F2;">})  </span><span style="color:#88846F;">// {message: &#39;\u4F60\u597D\u751F\u6D3B&#39;}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">_once</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;once-event&#39;</span><span style="color:#F8F8F2;">, listen_custom_event)</span></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">_emit</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;once-event&#39;</span><span style="color:#F8F8F2;">, { message: </span><span style="color:#E6DB74;">&#39;hello, world&#39;</span><span style="color:#F8F8F2;">})  </span><span style="color:#88846F;">// {message: &#39;hello, world&#39;}</span></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">_emit</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;once-event&#39;</span><span style="color:#F8F8F2;">, { message: </span><span style="color:#E6DB74;">&#39;hello, world&#39;</span><span style="color:#F8F8F2;">})  </span><span style="color:#88846F;">// \u65E0\u8F93\u51FA</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">_emit</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;custom-event&#39;</span><span style="color:#F8F8F2;">, { message: </span><span style="color:#E6DB74;">&#39;\u4F60\u597D\u751F\u6D3B&#39;</span><span style="color:#F8F8F2;">})    </span><span style="color:#88846F;">// {message: &#39;\u4F60\u597D\u751F\u6D3B&#39;}</span></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">_off</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;custom-event&#39;</span><span style="color:#F8F8F2;">, listen_custom_event)</span></span>
<span class="line"><span style="color:#F8F8F2;">window.</span><span style="color:#A6E22E;">_emit</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;custom-event&#39;</span><span style="color:#F8F8F2;">, { message: </span><span style="color:#E6DB74;">&#39;\u4F60\u597D\u751F\u6D3B&#39;</span><span style="color:#F8F8F2;">})  </span><span style="color:#88846F;">//  \u65E0\u8F93\u51FA</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;">// \u5C06\u4E0A\u8FF0\u6302\u8F7D\u5728window\u4E0A\u7684\u4E8B\u4EF6\u76D1\u542C\u548C\u89E6\u53D1 \u901A\u8FC7EventTarget\u4FEE\u6539</span></span>
<span class="line"><span style="color:#88846F;">// EventTarget\u662F\u4E00\u4E2ADOM\u63A5\u53E3,\u53EF\u4EE5\u63A5\u6536\u4E8B\u4EF6,\u5E76\u4E14\u53EF\u4EE5\u521B\u5EFA\u4FA6\u542C\u5668\u7684\u5BF9\u8C61\u5B9E\u73B0\u3002</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">class</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;text-decoration:underline;">EventEmitter</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">extends</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;font-style:italic;text-decoration:underline;">EventTarget</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">on</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">type</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">listener</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(type, listener)</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">once</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">type</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">listener</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(type, listener, {</span></span>
<span class="line"><span style="color:#F8F8F2;">      once: </span><span style="color:#AE81FF;">true</span></span>
<span class="line"><span style="color:#F8F8F2;">    })</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">off</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">type</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">listener</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">removeEventListener</span><span style="color:#F8F8F2;">(type, listener)</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#A6E22E;">emit</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">type</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">data</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FD971F;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#A6E22E;">dispatchEvent</span><span style="color:#F8F8F2;">(</span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">CustomEvent</span><span style="color:#F8F8F2;">(type, {</span></span>
<span class="line"><span style="color:#F8F8F2;">      detail: data</span></span>
<span class="line"><span style="color:#F8F8F2;">    }))</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> event_emitter </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">EventEmitter</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">listen_event_emitter</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> (</span><span style="color:#FD971F;font-style:italic;">event</span><span style="color:#F8F8F2;">) </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;event-emitter:&#39;</span><span style="color:#F8F8F2;">, event.detail)</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#F8F8F2;">event_emitter.</span><span style="color:#A6E22E;">on</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;dog&#39;</span><span style="color:#F8F8F2;">, listen_event_emitter)</span></span>
<span class="line"><span style="color:#F8F8F2;">event_emitter.</span><span style="color:#A6E22E;">emit</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;dog&#39;</span><span style="color:#F8F8F2;">, {</span></span>
<span class="line"><span style="color:#F8F8F2;">  name: </span><span style="color:#E6DB74;">&#39;hello&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">})  </span><span style="color:#88846F;">// \u6B63\u5E38\u89E6\u53D1</span></span>
<span class="line"><span style="color:#F8F8F2;">event_emitter.</span><span style="color:#A6E22E;">emit</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;dog&#39;</span><span style="color:#F8F8F2;">, {</span></span>
<span class="line"><span style="color:#F8F8F2;">  name: </span><span style="color:#E6DB74;">&#39;world&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">}) </span><span style="color:#88846F;">// \u6B63\u5E38\u89E6\u53D1</span></span>
<span class="line"><span style="color:#F8F8F2;">event_emitter.</span><span style="color:#A6E22E;">off</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;dog&#39;</span><span style="color:#F8F8F2;">, listen_event_emitter)</span></span>
<span class="line"><span style="color:#F8F8F2;">event_emitter.</span><span style="color:#A6E22E;">emit</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;dog&#39;</span><span style="color:#F8F8F2;">, {</span></span>
<span class="line"><span style="color:#F8F8F2;">  name: </span><span style="color:#E6DB74;">&#39;hello world&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">})  </span><span style="color:#88846F;">// \u6B64\u65F6\u89E6\u53D1\u6CA1\u6709\u8F93\u51FA</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">event_emitter.</span><span style="color:#A6E22E;">once</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;cat&#39;</span><span style="color:#F8F8F2;">, listen_event_emitter)</span></span>
<span class="line"><span style="color:#F8F8F2;">event_emitter.</span><span style="color:#A6E22E;">emit</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;cat&#39;</span><span style="color:#F8F8F2;">, {</span></span>
<span class="line"><span style="color:#F8F8F2;">  name: </span><span style="color:#E6DB74;">&#39;\u4F60\u597D&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"><span style="color:#F8F8F2;">event_emitter.</span><span style="color:#A6E22E;">emit</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;cat&#39;</span><span style="color:#F8F8F2;">, {</span></span>
<span class="line"><span style="color:#F8F8F2;">  name: </span><span style="color:#E6DB74;">&#39;\u751F\u6D3B&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,22),h={href:"https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget",target:"_blank",rel:"noopener noreferrer"},D=o("MDN-EventTarget"),g=l(`<h2 id="broadcastchannel" tabindex="-1"><a class="header-anchor" href="#broadcastchannel" aria-hidden="true">#</a> BroadcastChannel</h2><p>BroadcastChannel\u63A5\u53E3\u4EE3\u7406\u4E86\u4E00\u4E2A\u547D\u540D\u9891\u9053, \u53EF\u4EE5\u8BA9\u6307\u5B9Aorigin\u4E0B\u5F53\u4EFB\u610Fbrowsing context\u6765\u8BA2\u9605\u5B83\u3002\u5B83\u5141\u8BB8\u540C\u6E90\u7684\u4E0D\u540C\u6D4F\u89C8\u5668\u7A97\u53E3,tab\u9875\u9762, iframe\u4E0B\u7684\u4E0D\u540C\u6587\u6863\u4E4B\u95F4\u76F8\u4E92\u901A\u4FE1\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#88846F;">// \u7236\u7A97\u53E3</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> channel </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">BroadcastChannel</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;cat&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">button.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, () </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  channel.</span><span style="color:#A6E22E;">postMessage</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;hello world&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  channel.</span><span style="color:#A6E22E;">postMessage</span><span style="color:#F8F8F2;">([{firstName: </span><span style="color:#E6DB74;">&#39;kyrie&#39;</span><span style="color:#F8F8F2;">, lastName: </span><span style="color:#E6DB74;">&#39;irving&#39;</span><span style="color:#F8F8F2;">}])</span></span>
<span class="line"><span style="color:#F8F8F2;">}, </span><span style="color:#AE81FF;">false</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// \u5B50\u7A97\u53E3</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> channel </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">BroadcastChannel</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;cat&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">channel.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;message&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(e.data)</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(channel.name)   </span><span style="color:#88846F;">// cat</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p>BroadcastChannel.close() \u901A\u8FC7\u8C03\u7528BroadcastChannel.close() \u65B9\u6CD5\u53EF\u4EE5\u9A6C\u4E0A\u65AD\u5F00\u5176\u4E0E\u5BF9\u5E94\u9891\u9053\u7684\u5173\u8054\u3002\u5E76\u8BA9\u5176\u88AB\u5783\u573E\u56DE\u6536\u3002</p></li><li><p>BroadcastChannel.postMessage() BroadcastChannel.postMessage()\u53D1\u9001\u4E00\u6761\u4EFB\u610FObject\u7C7B\u578B\u7684\u6D88\u606F\u3002\u7ED9\u6240\u6709\u540C\u6E90\u4E0B\u76D1\u542C\u4E86\u8BE5\u9891\u9053\u7684\u6240\u6709\u6D4F\u89C8\u5668\u4E0A\u4E0B\u6587\u3002</p></li><li><p>BroadcastChannel: message event</p></li></ol><p>\u76D1\u542C\u901A\u8FC7postMessage()\u53D1\u9001\u7684\u6D88\u606F</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> channel </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">BroadcastChannel</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;cat&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">channel.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;message&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">event</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(event.data)</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6);function f(A,B){const t=a("JavaScript-Event"),e=a("ClientOnly"),c=a("JavaScript-EventDelegation"),F=a("ExternalLinkIcon");return r(),y("div",null,[v,n(e,null,{default:p(()=>[n(t)]),_:1}),u,E,m,n(e,null,{default:p(()=>[n(c)]),_:1}),b,s("p",null,[s("a",h,[D,n(F)])]),g])}var _=i(d,[["render",f],["__file","event.html.vue"]]);export{_ as default};
